import{c as p,m as E,r as d,o as I,b as l,e,q as P,I as b,v as f,L as R,N as V,F as x,f as D,t as n,l as y,i as a,A as z,n as $}from"./vendor.Bh3_gxHF.js";import{u as O}from"./marketingStore.D46PyJfU.js";import{_ as Q,b as j}from"./index.Cv61STol.js";const G={class:"admin-checklist-view"},H={class:"header"},J={class:"filter-controls"},K={class:"search-bar"},W={class:"filter-options"},X=["value"],Y={class:"stats-cards"},Z={class:"stat-card"},tt={class:"stat-value"},et={class:"stat-card"},st={class:"stat-value"},ot={class:"stat-card"},lt={class:"stat-value"},at={class:"stat-card"},nt={class:"stat-value"},rt={key:0,class:"loading-spinner"},it={key:1,class:"no-checklists"},ut={key:2,class:"checklists-table"},dt={key:0,class:"sort-icon"},vt={key:0,class:"sort-icon"},ct={key:0,class:"sort-icon"},pt={key:0,class:"sort-icon"},ft={key:0,class:"sort-icon"},mt={key:0,class:"agent-info"},gt={key:1},yt={class:"progress-indicator"},kt={class:"progress-bar"},Ct={class:"progress-text"},wt=["onClick"],bt={__name:"AdminChecklistView",setup(ht){const h=E(),_=O(),L=j();p(()=>L.currentRole==="admin").value||h.push("/marketing-tools");const u=d([]),w=d(!0),v=d(""),k=d("all"),C=d("all"),i=d("creationDate"),r=d("desc"),N=async()=>{w.value=!0;try{await _.checklists.fetchChecklists(),u.value=_.checklists.marketingChecklists}catch(o){console.error("Error loading checklists:",o)}finally{w.value=!1}},T=p(()=>{const o=new Set;return u.value.forEach(t=>{t.creator&&t.creator.name&&o.add(t.creator.name)}),Array.from(o)}),A=p(()=>{let o=[...u.value];if(v.value){const t=v.value.toLowerCase();o=o.filter(s=>s.title.toLowerCase().includes(t)||s.description&&s.description.toLowerCase().includes(t))}return k.value!=="all"&&(o=o.filter(t=>t.creator&&t.creator.name===k.value)),C.value!=="all"&&(o=o.filter(t=>t.status===C.value)),o.sort((t,s)=>{const c=S(t,i.value),g=S(s,i.value);return typeof c=="string"&&typeof g=="string"?r.value==="asc"?c.localeCompare(g):g.localeCompare(c):r.value==="asc"?c-g:g-c}),o}),S=(o,t)=>{var s;switch(t){case"title":return o.title||"";case"agent":return((s=o.creator)==null?void 0:s.name)||"";case"progress":return o.progress||0;case"creationDate":return new Date(o.creationDate).getTime();case"status":return o.status||"";default:return""}},B=p(()=>u.value.filter(o=>o.status==="completed").length),F=p(()=>u.value.filter(o=>o.progress>0&&o.status!=="completed").length),M=p(()=>u.value.filter(o=>o.progress===0&&o.status!=="completed").length),m=o=>{i.value===o?r.value=r.value==="asc"?"desc":"asc":(i.value=o,r.value="asc")},U=o=>o?new Date(o).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"N/A",q=o=>{h.push(`/marketing-tools/checklist/${o}`)};return I(()=>{N()}),(o,t)=>(a(),l("div",G,[e("div",H,[t[12]||(t[12]=e("h1",null,"Agent Checklists Overview",-1)),e("div",J,[e("div",K,[b(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),placeholder:"Search checklists...",class:"search-input"},null,512),[[R,v.value]]),v.value?(a(),l("button",{key:0,onClick:t[1]||(t[1]=s=>v.value=""),class:"clear-search"},t[9]||(t[9]=[e("span",null,"×",-1)]))):f("",!0)]),e("div",W,[b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>k.value=s),class:"filter-select"},[t[10]||(t[10]=e("option",{value:"all"},"All Agents",-1)),(a(!0),l(x,null,D(T.value,s=>(a(),l("option",{key:s,value:s},n(s),9,X))),128))],512),[[V,k.value]]),b(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>C.value=s),class:"filter-select"},t[11]||(t[11]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"completed"},"Completed",-1)]),512),[[V,C.value]])])])]),t[24]||(t[24]=P('<div class="admin-info-banner" data-v-70bdf2fc><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="info-icon" data-v-70bdf2fc><circle cx="12" cy="12" r="10" stroke-width="2" data-v-70bdf2fc></circle><line x1="12" y1="8" x2="12" y2="12" stroke-width="2" stroke-linecap="round" data-v-70bdf2fc></line><circle cx="12" cy="16" r="1" fill="currentColor" data-v-70bdf2fc></circle></svg><div class="admin-info-message" data-v-70bdf2fc><strong data-v-70bdf2fc>Admin View Mode</strong><span data-v-70bdf2fc>This overview shows all agent checklists. Admins can view checklist details but cannot create or modify checklists.</span></div></div>',1)),e("div",Y,[e("div",Z,[t[13]||(t[13]=e("h3",null,"Total Checklists",-1)),e("div",tt,n(u.value.length),1)]),e("div",et,[t[14]||(t[14]=e("h3",null,"Completed",-1)),e("div",st,n(B.value),1)]),e("div",ot,[t[15]||(t[15]=e("h3",null,"In Progress",-1)),e("div",lt,n(F.value),1)]),e("div",at,[t[16]||(t[16]=e("h3",null,"Not Started",-1)),e("div",nt,n(M.value),1)])]),w.value?(a(),l("div",rt," Loading checklists... ")):A.value.length===0?(a(),l("div",it,t[17]||(t[17]=[e("p",null,"No checklists found matching your filters.",-1)]))):(a(),l("div",ut,[e("table",null,[e("thead",null,[e("tr",null,[e("th",{onClick:t[4]||(t[4]=s=>m("title"))},[t[18]||(t[18]=y(" Title ")),i.value==="title"?(a(),l("span",dt,n(r.value==="asc"?"↑":"↓"),1)):f("",!0)]),e("th",{onClick:t[5]||(t[5]=s=>m("agent"))},[t[19]||(t[19]=y(" Agent ")),i.value==="agent"?(a(),l("span",vt,n(r.value==="asc"?"↑":"↓"),1)):f("",!0)]),e("th",{onClick:t[6]||(t[6]=s=>m("progress"))},[t[20]||(t[20]=y(" Progress ")),i.value==="progress"?(a(),l("span",ct,n(r.value==="asc"?"↑":"↓"),1)):f("",!0)]),e("th",{onClick:t[7]||(t[7]=s=>m("creationDate"))},[t[21]||(t[21]=y(" Created ")),i.value==="creationDate"?(a(),l("span",pt,n(r.value==="asc"?"↑":"↓"),1)):f("",!0)]),e("th",{onClick:t[8]||(t[8]=s=>m("status"))},[t[22]||(t[22]=y(" Status ")),i.value==="status"?(a(),l("span",ft,n(r.value==="asc"?"↑":"↓"),1)):f("",!0)]),t[23]||(t[23]=e("th",null,"Actions",-1))])]),e("tbody",null,[(a(!0),l(x,null,D(A.value,s=>(a(),l("tr",{key:s.id},[e("td",null,n(s.title),1),e("td",null,[s.creator?(a(),l("div",mt,[e("span",null,n(s.creator.name),1)])):(a(),l("span",gt,"Unknown"))]),e("td",null,[e("div",yt,[e("div",kt,[e("div",{class:$(["progress-fill",{low:(s.progress||0)<30,medium:(s.progress||0)>=30&&(s.progress||0)<70,high:(s.progress||0)>=70}]),style:z({width:`${s.progress||0}%`})},null,6)]),e("span",Ct,n(s.progress||0)+"%",1)])]),e("td",null,n(U(s.creationDate)),1),e("td",null,[e("span",{class:$(["status-badge",s.status||"draft"])},n(s.status||"draft"),3)]),e("td",null,[e("button",{class:"view-btn",onClick:c=>q(s.id)},"View",8,wt)])]))),128))])])]))]))}},xt=Q(bt,[["__scopeId","data-v-70bdf2fc"]]);export{xt as default};
