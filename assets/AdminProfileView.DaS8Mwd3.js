import{d as E,r as p,c as U,R as M,o as I,b as r,e as t,v as g,t as y,u as L,q as R,F as D,f as x,I as u,L as w,N as j,W as A,i as d,n as J}from"./vendor.Bh3_gxHF.js";import{_ as O}from"./index.Cv61STol.js";const $=E("admin",()=>{const v=p({}),a=p(!1),l=p(null),m=p([]),c=p([]),b={id:"admin-001",fullName:"John Doe",role:"System Administrator",email:"admin@realcity.com",phoneNumber:"(555) 123-4567",jobTitle:"Lead Administrator",department:"IT Administration",accessLevel:"Full access",permissions:["manage-agents","manage-properties","manage-clients","manage-content","view-analytics"],lastLogin:"2023-06-15 14:30",createdAt:"2022-01-10",twoFactorEnabled:!0,apiAccessKeys:["ak_real12345","ak_city67890"],preferences:{notifications:{email:!0,browser:!0,mobile:!1},theme:"light",defaultView:"dashboard"}},f=[{id:"log-001",action:"Login",timestamp:"2023-06-15 14:30:00",ipAddress:"192.168.1.1",userAgent:"Chrome/Windows"},{id:"log-002",action:"Updated agent profile",timestamp:"2023-06-15 11:24:32",details:"Agent ID: AGT-123"},{id:"log-003",action:"Created new property listing",timestamp:"2023-06-14 16:45:10",details:"Property ID: PROP-456"},{id:"log-004",action:"Generated monthly report",timestamp:"2023-06-12 09:15:22",details:"June 2023 Sales Report"},{id:"log-005",action:"System settings modified",timestamp:"2023-06-10 13:05:47",details:"Email notification settings"}],_=[{id:"notif-001",type:"alert",message:"System update scheduled for tonight",timestamp:"2023-06-15 10:30:00",read:!1},{id:"notif-002",type:"message",message:"New message from Agent Sarah",timestamp:"2023-06-14 16:20:15",read:!0},{id:"notif-003",type:"task",message:"Approval needed for new property listing",timestamp:"2023-06-14 09:45:32",read:!1}],i=U(()=>c.value.filter(o=>!o.read));function n(){a.value=!0,l.value=null,setTimeout(()=>{try{v.value=b,a.value=!1}catch(o){l.value="Failed to load admin data",a.value=!1,console.error(o)}},300)}function h(){a.value=!0,l.value=null,setTimeout(()=>{try{m.value=f,a.value=!1}catch(o){l.value="Failed to load activity log",a.value=!1,console.error(o)}},300)}function k(){a.value=!0,l.value=null,setTimeout(()=>{try{c.value=_,a.value=!1}catch(o){l.value="Failed to load notifications",a.value=!1,console.error(o)}},300)}function N(o){a.value=!0,l.value=null,setTimeout(()=>{try{v.value={...v.value,...o},a.value=!1}catch(e){l.value="Failed to update admin data",a.value=!1,console.error(e)}},300)}function C(o){const e=c.value.find(s=>s.id===o);e&&(e.read=!0)}function S(){c.value.forEach(o=>{o.read=!0})}function V(o){v.value.twoFactorEnabled=o}function F(o){v.value.preferences={...v.value.preferences,...o}}function T(){n(),h(),k()}return{adminData:v,activityLog:m,notifications:c,isLoading:a,error:l,unreadNotifications:i,fetchAdminData:n,fetchActivityLog:h,fetchNotifications:k,updateAdminData:N,markNotificationAsRead:C,markAllNotificationsAsRead:S,toggleTwoFactorAuth:V,updatePreferences:F,initializeStore:T}}),B={class:"admin-profile-container"},z={class:"profile-header"},G={class:"header-content"},W={class:"last-login"},q={class:"header-actions"},H=["disabled"],Q={key:0,class:"loading-container"},X={key:1,class:"profile-content"},Y={class:"profile-tabs"},Z=["onClick"],tt={class:"tab-content"},et={key:0,class:"profile-section"},st={class:"section-card"},ot={class:"form-grid"},it={class:"form-group"},at={class:"form-group"},nt={class:"form-group"},lt={class:"form-group"},rt={class:"form-group"},dt={class:"form-group"},ut={key:1,class:"security-section"},ct={class:"section-card"},pt={class:"security-option"},mt={class:"toggle-switch"},ft={class:"switch"},vt={class:"toggle-label"},yt={class:"security-option"},wt={class:"api-keys"},gt={class:"key-value"},bt=["onClick"],ht=["onClick"],kt={class:"security-option"},Pt={key:2,class:"activity-section"},At={class:"section-card"},_t={class:"activity-list"},Nt={class:"activity-details"},Ct={class:"activity-action"},St={class:"activity-meta"},Vt={class:"activity-time"},Ft={key:0,class:"activity-ip"},Tt={key:0,class:"activity-details-text"},Dt={key:3,class:"notifications-section"},xt={class:"section-card"},Mt={class:"notification-options"},Lt={class:"notification-option"},Ut={class:"toggle-switch"},Kt={class:"switch"},Et={class:"notification-option"},It={class:"toggle-switch"},Rt={class:"switch"},jt={class:"notification-option"},Jt={class:"toggle-switch"},Ot={class:"switch"},$t={key:2,class:"modal-overlay"},Bt={class:"modal"},zt={class:"modal-header"},Gt={class:"modal-body"},Wt={class:"form-group"},qt={class:"form-group"},Ht={class:"form-group"},Qt={class:"modal-footer"},Xt={__name:"AdminProfileView",setup(v){const a=$(),l=p(!0),m=p("profile"),c=p(!1),b=p({}),f=p({}),_=[{id:"profile",label:"Profile Information"},{id:"security",label:"Security"},{id:"activity",label:"Activity Log"},{id:"notifications",label:"Notifications"}],i=M({fullName:"",email:"",phoneNumber:"",jobTitle:"",department:"",role:"",twoFactorEnabled:!1,apiAccessKeys:[],preferences:{notifications:{email:!0,browser:!0,mobile:!1},theme:"light",defaultView:"dashboard"}}),n=M({currentPassword:"",newPassword:"",confirmPassword:""}),h=U(()=>JSON.stringify(i)!==JSON.stringify(b.value));I(async()=>{l.value=!0,await a.initializeStore(),Object.assign(i,a.adminData),b.value=JSON.parse(JSON.stringify(i)),l.value=!1});const k=o=>{if(!o)return"Never";const e=new Date(o);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)},N=o=>{if(f.value[o])return o;if(!o)return"";const e=o.substring(0,3),s=o.substring(o.length-4);return`${e}...${s}`},C=o=>{const e=i.apiAccessKeys[o];f.value[e]=!f.value[e],f.value[e]&&setTimeout(()=>{f.value[e]=!1},1e4)},S=o=>{confirm("Are you sure you want to delete this API key? This action cannot be undone.")&&i.apiAccessKeys.splice(o,1)},V=()=>{const o="ak_"+Math.random().toString(36).substring(2,15);i.apiAccessKeys.push(o),f.value[o]=!0,setTimeout(()=>{f.value[o]=!1},1e4)},F=async()=>{if(h.value){l.value=!0;try{await a.updateAdminData(i),b.value=JSON.parse(JSON.stringify(i)),alert("Profile updated successfully")}catch(o){console.error("Failed to update profile:",o),alert("Failed to update profile. Please try again.")}finally{l.value=!1}}},T=async()=>{if(!n.currentPassword){alert("Please enter your current password");return}if(!n.newPassword){alert("Please enter a new password");return}if(n.newPassword!==n.confirmPassword){alert("New password and confirmation do not match");return}try{setTimeout(()=>{n.currentPassword="",n.newPassword="",n.confirmPassword="",c.value=!1,alert("Password changed successfully")},1e3)}catch(o){console.error("Failed to change password:",o),alert("Failed to change password. Please try again.")}};return(o,e)=>(d(),r("div",B,[t("div",z,[t("div",G,[e[16]||(e[16]=t("h1",{class:"profile-title"},"Admin Profile",-1)),t("div",W," Last login: "+y(k(L(a).adminData.lastLogin)),1)]),t("div",q,[t("button",{class:"save-button",onClick:F,disabled:!h.value},e[17]||(e[17]=[R('<span class="icon" data-v-f9531873><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-f9531873><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" data-v-f9531873></path><polyline points="17 21 17 13 7 13 7 21" data-v-f9531873></polyline><polyline points="7 3 7 8 15 8" data-v-f9531873></polyline></svg></span> Save Changes ',2)]),8,H)])]),l.value?(d(),r("div",Q,e[18]||(e[18]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Loading admin profile...",-1)]))):(d(),r("div",X,[t("div",Y,[(d(),r(D,null,x(_,s=>t("button",{key:s.id,onClick:P=>m.value=s.id,class:J(["tab-button",{active:m.value===s.id}])},y(s.label),11,Z)),64))]),t("div",tt,[m.value==="profile"?(d(),r("div",et,[t("div",st,[e[26]||(e[26]=t("h2",{class:"section-title"},"Personal Information",-1)),t("div",ot,[t("div",it,[e[19]||(e[19]=t("label",{for:"fullName"},"Full Name",-1)),u(t("input",{id:"fullName",type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>i.fullName=s),class:"form-control"},null,512),[[w,i.fullName]])]),t("div",at,[e[20]||(e[20]=t("label",{for:"email"},"Email Address",-1)),u(t("input",{id:"email",type:"email","onUpdate:modelValue":e[1]||(e[1]=s=>i.email=s),class:"form-control"},null,512),[[w,i.email]])]),t("div",nt,[e[21]||(e[21]=t("label",{for:"phoneNumber"},"Phone Number",-1)),u(t("input",{id:"phoneNumber",type:"tel","onUpdate:modelValue":e[2]||(e[2]=s=>i.phoneNumber=s),class:"form-control"},null,512),[[w,i.phoneNumber]])]),t("div",lt,[e[22]||(e[22]=t("label",{for:"jobTitle"},"Job Title",-1)),u(t("input",{id:"jobTitle",type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>i.jobTitle=s),class:"form-control"},null,512),[[w,i.jobTitle]])]),t("div",rt,[e[23]||(e[23]=t("label",{for:"department"},"Department",-1)),u(t("input",{id:"department",type:"text","onUpdate:modelValue":e[4]||(e[4]=s=>i.department=s),class:"form-control"},null,512),[[w,i.department]])]),t("div",dt,[e[25]||(e[25]=t("label",{for:"role"},"Admin Role",-1)),u(t("select",{id:"role","onUpdate:modelValue":e[5]||(e[5]=s=>i.role=s),class:"form-control"},e[24]||(e[24]=[t("option",{value:"System Administrator"},"System Administrator",-1),t("option",{value:"Content Manager"},"Content Manager",-1),t("option",{value:"Analytics Manager"},"Analytics Manager",-1),t("option",{value:"Marketing Manager"},"Marketing Manager",-1)]),512),[[j,i.role]])])])])])):g("",!0),m.value==="security"?(d(),r("div",ut,[t("div",ct,[e[31]||(e[31]=t("h2",{class:"section-title"},"Security Settings",-1)),t("div",pt,[e[28]||(e[28]=t("div",{class:"option-details"},[t("h3",null,"Two-Factor Authentication"),t("p",null,"Add an extra layer of security to your account")],-1)),t("div",mt,[t("label",ft,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>i.twoFactorEnabled=s)},null,512),[[A,i.twoFactorEnabled]]),e[27]||(e[27]=t("span",{class:"slider round"},null,-1))]),t("span",vt,y(i.twoFactorEnabled?"Enabled":"Disabled"),1)])]),t("div",yt,[e[29]||(e[29]=t("div",{class:"option-details"},[t("h3",null,"API Access Keys"),t("p",null,"Manage your API access keys")],-1)),t("div",wt,[(d(!0),r(D,null,x(i.apiAccessKeys,(s,P)=>(d(),r("div",{key:P,class:"api-key"},[t("span",gt,y(N(s)),1),t("button",{class:"view-key-btn",onClick:K=>C(P)},"View",8,bt),t("button",{class:"delete-key-btn",onClick:K=>S(P)},"Delete",8,ht)]))),128)),t("button",{class:"generate-key-btn",onClick:V},"Generate New Key")])]),t("div",kt,[e[30]||(e[30]=t("div",{class:"option-details"},[t("h3",null,"Change Password"),t("p",null,"Update your account password")],-1)),t("button",{class:"change-password-btn",onClick:e[7]||(e[7]=s=>c.value=!0)},"Change Password")])])])):g("",!0),m.value==="activity"?(d(),r("div",Pt,[t("div",At,[e[33]||(e[33]=t("h2",{class:"section-title"},"Activity Log",-1)),e[34]||(e[34]=t("p",{class:"activity-description"},"Recent actions performed by your account",-1)),t("div",_t,[(d(!0),r(D,null,x(L(a).activityLog,s=>(d(),r("div",{key:s.id,class:"activity-item"},[e[32]||(e[32]=t("div",{class:"activity-icon"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})])],-1)),t("div",Nt,[t("div",Ct,y(s.action),1),t("div",St,[t("span",Vt,y(k(s.timestamp)),1),s.ipAddress?(d(),r("span",Ft,"IP: "+y(s.ipAddress),1)):g("",!0)]),s.details?(d(),r("div",Tt,y(s.details),1)):g("",!0)])]))),128))])])])):g("",!0),m.value==="notifications"?(d(),r("div",Dt,[t("div",xt,[e[41]||(e[41]=t("h2",{class:"section-title"},"Notification Settings",-1)),t("div",Mt,[t("div",Lt,[e[36]||(e[36]=t("div",{class:"option-details"},[t("h3",null,"Email Notifications"),t("p",null,"Receive notifications via email")],-1)),t("div",Ut,[t("label",Kt,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=s=>i.preferences.notifications.email=s)},null,512),[[A,i.preferences.notifications.email]]),e[35]||(e[35]=t("span",{class:"slider round"},null,-1))])])]),t("div",Et,[e[38]||(e[38]=t("div",{class:"option-details"},[t("h3",null,"Browser Notifications"),t("p",null,"Receive notifications in your browser")],-1)),t("div",It,[t("label",Rt,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=s=>i.preferences.notifications.browser=s)},null,512),[[A,i.preferences.notifications.browser]]),e[37]||(e[37]=t("span",{class:"slider round"},null,-1))])])]),t("div",jt,[e[40]||(e[40]=t("div",{class:"option-details"},[t("h3",null,"Mobile Notifications"),t("p",null,"Receive notifications on your mobile device")],-1)),t("div",Jt,[t("label",Ot,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=s=>i.preferences.notifications.mobile=s)},null,512),[[A,i.preferences.notifications.mobile]]),e[39]||(e[39]=t("span",{class:"slider round"},null,-1))])])])])])])):g("",!0)])])),c.value?(d(),r("div",$t,[t("div",Bt,[t("div",zt,[e[42]||(e[42]=t("h2",null,"Change Password",-1)),t("button",{class:"close-button",onClick:e[11]||(e[11]=s=>c.value=!1)},"Ã—")]),t("div",Gt,[t("div",Wt,[e[43]||(e[43]=t("label",{for:"currentPassword"},"Current Password",-1)),u(t("input",{id:"currentPassword",type:"password","onUpdate:modelValue":e[12]||(e[12]=s=>n.currentPassword=s),class:"form-control"},null,512),[[w,n.currentPassword]])]),t("div",qt,[e[44]||(e[44]=t("label",{for:"newPassword"},"New Password",-1)),u(t("input",{id:"newPassword",type:"password","onUpdate:modelValue":e[13]||(e[13]=s=>n.newPassword=s),class:"form-control"},null,512),[[w,n.newPassword]])]),t("div",Ht,[e[45]||(e[45]=t("label",{for:"confirmPassword"},"Confirm New Password",-1)),u(t("input",{id:"confirmPassword",type:"password","onUpdate:modelValue":e[14]||(e[14]=s=>n.confirmPassword=s),class:"form-control"},null,512),[[w,n.confirmPassword]])])]),t("div",Qt,[t("button",{class:"cancel-button",onClick:e[15]||(e[15]=s=>c.value=!1)},"Cancel"),t("button",{class:"save-button",onClick:T},"Update Password")])])])):g("",!0)]))}},te=O(Xt,[["__scopeId","data-v-f9531873"]]);export{te as default};
