import{r as w,o as T,p as U,c as z,b as l,e as s,v as d,l as v,t as c,F as h,f as x,I,L as D,n as m,q as O,m as j,i as r,A as H}from"./vendor.Bh3_gxHF.js";import{_ as K,a as Q,d as W,e as Y}from"./index.Cv61STol.js";const G={class:"client-agents-page"},J={class:"filter-section"},X={class:"filter-row"},Z={class:"filter-group"},ee={key:0,class:"filter-dropdown"},te=["onClick"],se={key:0,class:"check-mark"},ne={class:"filter-group"},ie={key:0,class:"filter-dropdown"},oe=["onClick"],le={key:0,class:"check-mark"},re={class:"filter-group"},ae={key:0,class:"filter-dropdown"},ce=["onClick"],ue={key:0,class:"check-mark"},de={class:"filter-group"},ve={key:0,class:"filter-dropdown"},ge=["onClick"],pe={key:0,class:"check-mark"},we={class:"search-bar"},he={class:"view-toggle"},xe={key:0,class:"no-results"},fe={class:"agent-info"},ke={class:"agent-details"},me={class:"agent-name-row"},ye={class:"experience"},Ce={class:"agent-meta"},be={class:"meta-item"},_e={class:"meta-item"},qe={class:"agent-actions"},$e=["onClick"],Re=["onClick"],Se={__name:"ClientAgentsView",setup(Le){const $=j(),R=Q(),S=W(),y=Y.useToast(),g=w(""),u=w(null),p=w("grid"),L=[{min:0,max:1e5,label:"Under $100k"},{min:1e5,max:25e4,label:"$100k - $250k"},{min:25e4,max:5e5,label:"$250k - $500k"},{min:5e5,max:1e6,label:"$500k - $1M"},{min:1e6,max:null,label:"Over $1M"}],B=["Luxury Homes","Waterfront Properties","Commercial Properties","Investment Properties","Residential Properties","First-Time Buyers","Urban Apartments","Luxury Condos"],A=[{value:"1-5",label:"1-5 years"},{value:"6-10",label:"6-10 years"},{value:"10+",label:"10+ years"}],M=[{value:5,label:"5 Stars"},{value:4,label:"4 Stars"},{value:3,label:"3 Stars"},{value:2,label:"2 Stars"},{value:1,label:"1 Star"}],i=w({priceRange:null,expertise:null,experience:null,rating:null}),C=w(new Set),_=n=>{n.target.closest(".filter-group")||(u.value=null)};T(()=>{document.addEventListener("click",_)}),U(()=>{document.removeEventListener("click",_)});const q=z(()=>{let n=R.getAllAgents();if(g.value.trim()){const e=g.value.toLowerCase();n=n.filter(t=>{var o;return t.location.toLowerCase().includes(e)||t.name.toLowerCase().includes(e)||((o=t.specialties)==null?void 0:o.some(a=>a.toLowerCase().includes(e)))})}if(i.value.priceRange){const e=i.value.priceRange;n=n.filter(t=>{const o=t.averagePropertyPrice||0;return o>=e.min&&(!e.max||o<=e.max)})}if(i.value.expertise&&(n=n.filter(e=>{var t;return(t=e.specialties)==null?void 0:t.includes(i.value.expertise)})),i.value.experience&&(n=n.filter(e=>{const[t,o]=i.value.experience.split("-").map(Number),a=e.yearsOfExperience||0;return o?a>=t&&a<=o:a>=t})),i.value.rating){const e=i.value.rating,t=e<5?e+1:5.1;n=n.filter(o=>{const a=o.averageRating||0;return a>=e&&a<t})}return n});function f(n){u.value===n?u.value=null:u.value=n}function k(n,e){i.value[n]===e?i.value[n]=null:i.value[n]=e,u.value=null}function P(){console.log("Searching:",g.value)}function E(n){$.push(`/client-find-agents/${n}`)}function b(n){return C.value.has(n)}async function F(n,e){try{if(b(n)){C.value.delete(n);const a=e.target;a.textContent="Request to connect",a.classList.remove("request-sent","pending-request"),y.success("Connection request cancelled");return}const t=e.target;if(t.disabled=!0,t.textContent="Connecting...",await S.requestConnection(1,"client",n,"agent","I would like to connect with you regarding real estate opportunities."))y.success("Connection request sent successfully!"),t.textContent="Cancel request",t.classList.add("request-sent","pending-request"),C.value.add(n);else throw new Error("Failed to send connection request")}catch(t){if(console.error("Error requesting connection:",t),y.error("Failed to send connection request. Please try again."),e&&e.target){const o=e.target;o.disabled=!1,o.textContent="Request to connect",o.classList.remove("request-sent","pending-request")}}finally{if(e&&e.target){const t=e.target;t.disabled=!1}}}function V(n){return n.split(" ").map(e=>e[0]).join("").toUpperCase()}function N(){return"#1849A9"}return(n,e)=>(r(),l("div",G,[s("div",J,[s("div",X,[s("div",Z,[s("button",{class:"filter-button",onClick:e[0]||(e[0]=t=>f("priceRange"))},[v(c(i.value.priceRange?i.value.priceRange.label:"Price Range ($)")+" ",1),e[7]||(e[7]=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M6 9l6 6 6-6"})],-1))]),u.value==="priceRange"?(r(),l("div",ee,[(r(),l(h,null,x(L,t=>s("div",{key:t.label,class:"filter-option",onClick:o=>k("priceRange",t)},[v(c(t.label)+" ",1),i.value.priceRange===t?(r(),l("span",se,"✓")):d("",!0)],8,te)),64))])):d("",!0)]),s("div",ne,[s("button",{class:"filter-button",onClick:e[1]||(e[1]=t=>f("expertise"))},[v(c(i.value.expertise||"Agent expertise")+" ",1),e[8]||(e[8]=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M6 9l6 6 6-6"})],-1))]),u.value==="expertise"?(r(),l("div",ie,[(r(),l(h,null,x(B,t=>s("div",{key:t,class:"filter-option",onClick:o=>k("expertise",t)},[v(c(t)+" ",1),i.value.expertise===t?(r(),l("span",le,"✓")):d("",!0)],8,oe)),64))])):d("",!0)]),s("div",re,[s("button",{class:"filter-button",onClick:e[2]||(e[2]=t=>f("experience"))},[v(c(i.value.experience?`${i.value.experience} years`:"Experience level")+" ",1),e[9]||(e[9]=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M6 9l6 6 6-6"})],-1))]),u.value==="experience"?(r(),l("div",ae,[(r(),l(h,null,x(A,t=>s("div",{key:t.value,class:"filter-option",onClick:o=>k("experience",t.value)},[v(c(t.label)+" ",1),i.value.experience===t.value?(r(),l("span",ue,"✓")):d("",!0)],8,ce)),64))])):d("",!0)]),s("div",de,[s("button",{class:"filter-button",onClick:e[3]||(e[3]=t=>f("rating"))},[v(c(i.value.rating?`${i.value.rating}+ Stars`:"Rating")+" ",1),e[10]||(e[10]=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M6 9l6 6 6-6"})],-1))]),u.value==="rating"?(r(),l("div",ve,[(r(),l(h,null,x(M,t=>s("div",{key:t.value,class:"filter-option",onClick:o=>k("rating",t.value)},[v(c(t.label)+" ",1),i.value.rating===t.value?(r(),l("span",pe,"✓")):d("",!0)],8,ge)),64))])):d("",!0)])]),s("div",we,[e[11]||(e[11]=s("svg",{class:"search-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("circle",{cx:"11",cy:"11",r:"8"}),s("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),I(s("input",{type:"text",placeholder:"Search by City, state...","onUpdate:modelValue":e[4]||(e[4]=t=>g.value=t),onInput:P},null,544),[[D,g.value]]),e[12]||(e[12]=s("span",{class:"keyboard-shortcut"},"⌘ K",-1))]),s("div",he,[s("button",{class:m(["view-toggle-button",{active:p.value==="grid"}]),onClick:e[5]||(e[5]=t=>p.value="grid")},e[13]||(e[13]=[O('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-dd7129f8><rect x="3" y="3" width="7" height="7" data-v-dd7129f8></rect><rect x="14" y="3" width="7" height="7" data-v-dd7129f8></rect><rect x="14" y="14" width="7" height="7" data-v-dd7129f8></rect><rect x="3" y="14" width="7" height="7" data-v-dd7129f8></rect></svg>',1)]),2),s("button",{class:m(["view-toggle-button",{active:p.value==="list"}]),onClick:e[6]||(e[6]=t=>p.value="list")},e[14]||(e[14]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),s("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),s("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)]),2)])]),q.value.length===0?(r(),l("div",xe,e[15]||(e[15]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("circle",{cx:"11",cy:"11",r:"8"}),s("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1),s("h3",null,"No agents found",-1),s("p",null,"Try adjusting your filters or search criteria",-1)]))):(r(),l("div",{key:1,class:m(["agents-list",p.value+"-view"])},[(r(!0),l(h,null,x(q.value,t=>{var o;return r(),l("div",{key:t.id,class:"agent-card"},[s("div",fe,[s("div",{class:"agent-initials",style:H({backgroundColor:N()})},c(V(t.name)),5),s("div",ke,[s("div",me,[s("h3",null,c(t.name),1),s("span",ye,"("+c(t.yearsOfExperience)+"+ Yr of experience)",1)]),s("div",Ce,[s("div",be,[e[16]||(e[16]=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"}),s("circle",{cx:"12",cy:"10",r:"3"})],-1)),s("span",null,c(t.location),1)]),s("div",_e,[e[17]||(e[17]=s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1)),s("span",null,c(((o=t.specialties)==null?void 0:o[0])||"No specialty"),1)])])])]),s("div",qe,[s("button",{class:"action-button view-profile",onClick:a=>E(t.id)}," View profile ",8,$e),s("button",{class:m(["action-button request-connect",{"pending-request":b(t.id)}]),onClick:a=>F(t.id,a)},c(b(t.id)?"Cancel request":"Request to connect"),11,Re)])])}),128))],2))]))}},Me=K(Se,[["__scopeId","data-v-dd7129f8"]]);export{Me as default};
