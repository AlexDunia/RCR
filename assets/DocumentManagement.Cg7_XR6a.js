import{r as i,o as x,c as A,b as a,v,F as _,f as p,e,y as M,m as B,h as S,i as n,j as h,k as V,n as $,t as u}from"./vendor.Bh3_gxHF.js";import{u as z}from"./documents.CHcazOjv.js";import{L as f}from"./Loader.DRAEMdx-.js";import{_ as N}from"./index.Cv61STol.js";const E={class:"document-management"},R={key:0,class:"documents-loader"},T={key:1},F={key:0,class:"recent-documents"},H={class:"document-card"},U={class:"card-header"},j={key:1,class:"section-title"},I={class:"card-content"},q={class:"documents-list"},G={class:"document-info"},J={class:"document-name"},K={class:"document-date"},O={class:"document-actions"},P=["onClick"],Q=["onClick"],W={key:2,class:"delete-confirm-overlay"},X={class:"delete-confirm-dialog"},Y={class:"dialog-actions"},Z={__name:"DocumentManagement",setup(ee){const d=z(),D=B(),r=i(!0),l=i(!1),c=i(null);x(()=>{setTimeout(()=>{r.value=!1},1e3)});const m=A(()=>d.documents.slice().sort((t,s)=>new Date(s.createdAt)-new Date(t.createdAt)).slice(0,5)),y=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=t=>{switch(t.type){case"buyer-rep":return`${t.buyerName}'s Buyer Rep Agreement`;case"seller-rep":return`${t.sellerName}'s Seller Rep Agreement`;case"mls":return`MLS Listing - ${t.propertyAddress}`;default:return"Untitled Document"}},k=t=>{D.push(`/receipts-docs/document/${t}/edit`)},w=t=>{c.value=t,l.value=!0},b=async()=>{if(c.value)try{await d.deleteDocument(c.value),l.value=!1,c.value=null}catch(t){console.error("Error deleting document:",t)}};return(t,s)=>{const C=S("router-link");return n(),a("div",E,[r.value?(n(),a("div",R,[(n(),a(_,null,p(3,o=>h(f,{key:o})),64))])):(n(),a("div",T,[m.value.length>0?(n(),a("div",F,[e("div",H,[e("div",U,[r.value?(n(),M(f,{key:0,class:"title-loader"})):(n(),a("h2",j,"Recent Documents"))]),e("div",I,[e("div",q,[(n(!0),a(_,null,p(m.value,o=>(n(),a("div",{key:o.id,class:"document-item"},[h(C,{to:{name:"DocumentDetail",params:{id:o.id}},class:"document-link"},{default:V(()=>[e("div",G,[e("span",{class:$(["document-badge",o.type])},u(o.type),3),e("h4",J,u(g(o)),1),e("p",K,u(y(o.createdAt)),1)])]),_:2},1032,["to"]),e("div",O,[e("button",{class:"action-button edit-button",onClick:L=>k(o.id),title:"Edit document"},s[1]||(s[1]=[e("span",{class:"tooltip"},"Edit",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"action-icon",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)]),8,P),e("button",{class:"action-button delete-button",onClick:L=>w(o.id),title:"Delete document"},s[2]||(s[2]=[e("span",{class:"tooltip"},"Delete",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"action-icon",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,Q)])]))),128))])])])])):v("",!0)])),l.value?(n(),a("div",W,[e("div",X,[s[3]||(s[3]=e("h3",null,"Delete Document",-1)),s[4]||(s[4]=e("p",null,"Are you sure you want to delete this document? This action cannot be undone.",-1)),e("div",Y,[e("button",{class:"cancel-button",onClick:s[0]||(s[0]=o=>l.value=!1)},"Cancel"),e("button",{class:"confirm-button",onClick:b},"Delete")])])])):v("",!0)])}}},ae=N(Z,[["__scopeId","data-v-e33aa3cb"]]);export{ae as default};
