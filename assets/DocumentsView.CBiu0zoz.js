import{r as v,c as S,o as G,b as l,e,v as b,t as d,I as q,L as Y,n as p,l as x,F as C,f as _,q as L,s as m,m as J,i as a}from"./vendor.Bh3_gxHF.js";import{u as K}from"./documents.CHcazOjv.js";import{_ as Q}from"./index.Cv61STol.js";const X={class:"documents-container"},W={class:"page-title-section"},Z={class:"notification-badge"},ee={class:"count"},te={class:"documents-toolbar"},se={class:"search-filter"},oe={class:"search-box"},ne=["disabled"],le={class:"document-categories"},ae=["disabled"],ie=["disabled"],re=["disabled"],de=["disabled"],ue={key:0,class:"documents-grid"},ce={key:1,class:"empty-state"},ve={key:2,class:"documents-grid"},pe=["onClick"],me={class:"document-card-header"},ge={class:"document-card-body"},fe={class:"document-title"},he={class:"document-meta"},we={class:"document-card-footer"},ye={key:0,class:"document-agent"},ke={class:"agent-avatar"},be=["src","alt"],xe={class:"agent-info"},Ce={class:"agent-name"},_e={class:"agent-experience"},De={class:"document-actions"},Be=["onClick"],Me=["onClick"],$e={class:"modal-container"},je={class:"modal-header"},Se={class:"modal-body"},Le={key:0,class:"uploaded-files"},Fe={class:"file-info"},Ae={class:"file-details"},Ue={class:"file-name"},ze={class:"file-type"},Te=["onClick"],Ie={class:"modal-footer"},Ve=["disabled"],y=1,Ne={__name:"DocumentsView",setup(Ee){const F=J(),h=K(),u=v(!0),g=v(""),i=v(""),c=v(!1),r=v([]),w=v(!1),D=v(null),A=s=>{s.target.src="https://res.cloudinary.com/dnuhjsckk/image/upload/v1739408381/Screenshot_2025-02-13_015617_mhjgby.png"},U=s=>{switch(s){case"buyer-rep":return"Buyer Agreement";case"seller-rep":return"Seller Agreement";case"mls":return"MLS Listing";default:return"Document"}},z=S(()=>h.documents.filter(s=>s.clientId===y)),k=S(()=>{let s=z.value;if(g.value){const t=g.value.toLowerCase();s=s.filter(o=>{var f;return[M(o),o.type,((f=o.agents)==null?void 0:f.map(O=>O.name).join(" "))||""].join(" ").toLowerCase().includes(t)})}return i.value&&(s=s.filter(t=>t.type===i.value)),s}),T=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),B=s=>{if(!s)return"0 B";const t=["B","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(1024));return`${(s/Math.pow(1024,o)).toFixed(2)} ${t[o]}`},M=s=>{switch(s.type){case"buyer-rep":return`${s.buyerName}'s Buyer Rep Agreement`;case"seller-rep":return`${s.sellerName}'s Seller Rep Agreement`;case"mls":return`MLS Listing - ${s.propertyAddress}`;default:return"Untitled Document"}},I=s=>{switch(s){case"buyer-rep":return"buyer-rep";case"seller-rep":return"seller-rep";case"mls":return"mls";default:return"default"}},$=s=>{F.push(`/documents/${s.id}`)},V=s=>{console.log("Downloading document:",s.id)},N=()=>{D.value.click()},E=s=>{const t=Array.from(s.target.files);t.length>0&&(j(t),s.target.value="")},R=s=>{w.value=!1;const t=Array.from(s.dataTransfer.files);t.length>0&&j(t)},j=s=>{s.slice(0,5).forEach(n=>{const f={file:n,name:n.name,size:n.size,type:n.type,preview:n.type.includes("image/")?URL.createObjectURL(n):null,status:"ready"};r.value.push(f)}),s.length>5&&console.warn("Only the first 5 files were added. Please upload in smaller batches.")},P=s=>{const t=r.value[s];t.preview&&URL.revokeObjectURL(t.preview),r.value.splice(s,1)},H=async()=>{if(r.value.length!==0){r.value.forEach(s=>{s.status="uploading"});try{await new Promise(t=>setTimeout(t,1500));const s={type:"buyer-rep",buyerName:"Alex Dunia",clientId:y,description:"Upload from client portal",createdAt:new Date().toISOString().split("T")[0],files:r.value.map(t=>({name:t.name,type:t.type,size:t.size}))};await h.addDocument(s),r.value=[],c.value=!1,await h.fetchDocumentsByClientId(y)}catch(s){console.error("Error uploading document:",s),r.value.forEach(t=>{t.status="error"})}}};return G(async()=>{try{await h.fetchDocumentsByClientId(y)}catch(s){console.error("Error loading documents:",s)}finally{setTimeout(()=>{u.value=!1},1500)}}),(s,t)=>(a(),l("div",X,[e("div",W,[t[14]||(t[14]=e("h1",null,"Your Documents",-1)),e("div",Z,[e("span",ee,d(u.value?"...":k.value.length),1),t[13]||(t[13]=e("span",null,"documents",-1))])]),e("div",te,[e("div",se,[e("div",oe,[q(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>g.value=o),placeholder:"Search documents...",disabled:u.value},null,8,ne),[[Y,g.value]]),t[15]||(t[15]=e("button",{class:"search-button"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1))]),e("div",le,[e("button",{class:p(["category-btn",{active:i.value===""}]),onClick:t[1]||(t[1]=o=>i.value=""),disabled:u.value}," All Documents ",10,ae),e("button",{class:p(["category-btn",{active:i.value==="buyer-rep"}]),onClick:t[2]||(t[2]=o=>i.value="buyer-rep"),disabled:u.value}," Buyer Agreements ",10,ie),e("button",{class:p(["category-btn",{active:i.value==="seller-rep"}]),onClick:t[3]||(t[3]=o=>i.value="seller-rep"),disabled:u.value}," Seller Agreements ",10,re),e("button",{class:p(["category-btn",{active:i.value==="mls"}]),onClick:t[4]||(t[4]=o=>i.value="mls"),disabled:u.value}," MLS Listings ",10,de)])]),e("button",{class:"upload-button",onClick:t[5]||(t[5]=o=>c.value=!0)},t[16]||(t[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"17 8 12 3 7 8"}),e("line",{x1:"12",y1:"3",x2:"12",y2:"15"})],-1),x(" Upload Document ")]))]),u.value?(a(),l("div",ue,[(a(),l(C,null,_(6,o=>e("div",{key:o,class:"document-card skeleton-card"},t[17]||(t[17]=[L('<div class="document-card-header" data-v-ef2a6482><div class="skeleton skeleton-icon" data-v-ef2a6482></div><div class="skeleton skeleton-badge" data-v-ef2a6482></div></div><div class="document-card-body" data-v-ef2a6482><div class="skeleton skeleton-title" data-v-ef2a6482></div><div class="skeleton skeleton-meta" data-v-ef2a6482></div></div><div class="document-card-footer" data-v-ef2a6482><div class="skeleton-agent" data-v-ef2a6482><div class="skeleton skeleton-avatar" data-v-ef2a6482></div><div class="skeleton-agent-info" data-v-ef2a6482><div class="skeleton skeleton-name" data-v-ef2a6482></div><div class="skeleton skeleton-experience" data-v-ef2a6482></div></div></div><div class="skeleton-actions" data-v-ef2a6482><div class="skeleton skeleton-action" data-v-ef2a6482></div><div class="skeleton skeleton-action" data-v-ef2a6482></div></div></div>',3)]))),64))])):k.value.length===0?(a(),l("div",ce,[t[19]||(t[19]=L('<div class="empty-icon" data-v-ef2a6482><svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" data-v-ef2a6482><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-ef2a6482></path><polyline points="14 2 14 8 20 8" data-v-ef2a6482></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-ef2a6482></line><line x1="16" y1="17" x2="8" y2="17" data-v-ef2a6482></line><polyline points="10 9 9 9 8 9" data-v-ef2a6482></polyline></svg></div><h2 data-v-ef2a6482>No Documents Found</h2>',2)),e("p",null,d(g.value||i.value?"Try adjusting your search filters":"Upload important documents related to your real estate journey."),1),e("button",{class:"empty-state-button",onClick:t[6]||(t[6]=o=>c.value=!0)},t[18]||(t[18]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"17 8 12 3 7 8"}),e("line",{x1:"12",y1:"3",x2:"12",y2:"15"})],-1),x(" Upload Your First Document ")]))])):(a(),l("div",ve,[(a(!0),l(C,null,_(k.value,o=>(a(),l("div",{key:o.id,class:"document-card",onClick:n=>$(o)},[e("div",me,[e("div",{class:p(["document-icon",I(o.type)])},t[20]||(t[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})],-1)]),2),e("div",{class:p(["document-type-badge",o.type])},d(U(o.type)),3)]),e("div",ge,[e("h3",fe,d(M(o)),1),e("p",he," Added: "+d(T(o.createdAt))+" • "+d(o.files&&o.files.length>0?B(o.files[0].size):"No files"),1)]),e("div",we,[o.agents&&o.agents.length>0?(a(),l("div",ye,[e("div",ke,[e("img",{src:o.agents[0].avatar,alt:o.agents[0].name,onError:A},null,40,be)]),e("div",xe,[e("span",Ce,d(o.agents[0].name),1),e("span",_e,d(o.agents[0].experience),1)])])):b("",!0),e("div",De,[e("button",{class:"action-button view",onClick:m(n=>$(o),["stop"]),title:"View"},t[21]||(t[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)]),8,Be),e("button",{class:"action-button download",onClick:m(n=>V(o),["stop"]),title:"Download"},t[22]||(t[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)]),8,Me)])])],8,pe))),128))])),c.value?(a(),l("div",{key:3,class:"modal-overlay",onClick:t[12]||(t[12]=m(o=>c.value=!1,["self"]))},[e("div",$e,[e("div",je,[t[23]||(t[23]=e("h3",null,"Upload Document",-1)),e("button",{onClick:t[7]||(t[7]=o=>c.value=!1),class:"modal-close"},"×")]),e("div",Se,[e("div",{class:p(["upload-area",{dragging:w.value}]),onDrop:m(R,["prevent"]),onDragover:t[8]||(t[8]=m(()=>{},["prevent"])),onDragenter:t[9]||(t[9]=m(o=>w.value=!0,["prevent"])),onDragleave:t[10]||(t[10]=m(o=>w.value=!1,["prevent"]))},[t[25]||(t[25]=e("div",{class:"upload-icon"},[e("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M12 12V19M12 12L15 15M12 12L9 15M20 16.7428C21.2215 15.734 22 14.2079 22 12.5C22 9.46243 19.5376 7 16.5 7C16.2815 7 16.0771 7.01349 15.8767 7.03857C14.9827 4.67583 12.6997 3 10 3C6.13401 3 3 6.13401 3 10C3 12.2501 4.07741 14.2509 5.75 15.4805"})])],-1)),e("div",{class:"upload-text"},[t[24]||(t[24]=x(" Drag & drop files here or ")),e("button",{onClick:N,class:"browse-link"},"Browse")]),t[26]||(t[26]=e("div",{class:"upload-formats"}," Supported formats: PDF, DOC, XLS, PPT, JPG, PNG ",-1)),e("input",{type:"file",ref_key:"fileInput",ref:D,onChange:E,multiple:"",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png",class:"hidden"},null,544)],34),r.value.length>0?(a(),l("div",Le,[(a(!0),l(C,null,_(r.value,(o,n)=>(a(),l("div",{key:n,class:"file-item"},[e("div",Fe,[t[27]||(t[27]=e("div",{class:"file-icon"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"})])],-1)),e("div",Ae,[e("span",Ue,d(o.name),1),e("span",ze,d(B(o.size)),1)])]),e("button",{class:"file-remove",onClick:f=>P(n),title:"Remove"},t[28]||(t[28]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]),8,Te)]))),128))])):b("",!0)]),e("div",Ie,[e("button",{class:"btn-cancel",onClick:t[11]||(t[11]=o=>c.value=!1)},"Cancel"),e("button",{class:"btn-upload",onClick:H,disabled:r.value.length===0}," Upload ",8,Ve)])])])):b("",!0)]))}},Oe=Q(Ne,[["__scopeId","data-v-ef2a6482"]]);export{Oe as default};
