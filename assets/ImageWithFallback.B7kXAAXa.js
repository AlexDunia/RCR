import{r as o,c as m,w as f,o as v,b as s,i as r,v as S,n as i}from"./vendor.Bh3_gxHF.js";import{_ as k}from"./index.Cv61STol.js";const u=e=>{if(!e||e.startsWith("data:"))return e;const a=new Date().getTime(),t=e.includes("?")?"&":"?";return`${e}${t}t=${a}`},w=["src","alt","width","height"],y=["src","alt","width","height"],b={key:2,class:"loading-placeholder"},I={__name:"ImageWithFallback",props:{src:{type:String,required:!0},alt:{type:String,default:"Image"},fallbackSrc:{type:String,default:"/images/default-avatar.svg"},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},class:{type:String,default:""},forceRefresh:{type:Boolean,default:!1}},setup(e){const a=e,t=o(a.src),c=o(!1),l=o(!0),d=m(()=>a.forceRefresh?u(t.value):t.value);f(()=>a.src,n=>{t.value=n,c.value=!1,l.value=!0});const h=()=>{c.value=!0,l.value=!1,console.log(`Image load error for ${a.src}, using fallback`),t.value=a.fallbackSrc},g=()=>{l.value=!1};return v(()=>{localStorage.getItem("imagesNeedRefresh")==="true"&&(localStorage.removeItem("imagesNeedRefresh"),t.value=u(a.src))}),(n,p)=>(r(),s("div",{class:i(["image-container",{"is-loading":l.value}])},[c.value?(r(),s("img",{key:1,src:e.fallbackSrc,alt:e.alt,width:e.width,height:e.height,class:i(e.class)},null,10,y)):(r(),s("img",{key:0,src:d.value,alt:e.alt,width:e.width,height:e.height,class:i(e.class),onError:h,onLoad:g},null,42,w)),l.value?(r(),s("div",b)):S("",!0)],2))}},E=k(I,[["__scopeId","data-v-83d37cec"]]);export{E as I};
