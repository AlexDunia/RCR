import{r as m,c as w,o as H,g as L,b as n,v as c,e as t,l as C,t as a,n as f,A as j,F as h,f as _,m as z,i as o}from"./vendor.Bh3_gxHF.js";import{u as F}from"./marketingStore.D46PyJfU.js";import{_ as I,b as O}from"./index.Cv61STol.js";const T={key:0,class:"loading-container"},R={key:1,class:"error-container"},E={key:2,class:"plan-detail-container"},N={class:"plan-header"},$={class:"plan-title"},U={class:"meta-info"},Z={class:"date"},J={key:0,class:"creator-badge"},q={class:"creator-name"},G={key:0,class:"assignment-info"},K={class:"assigned-agents"},Q={key:1,class:"checklist-info"},W={class:"progress-bar-container"},X={class:"progress-text"},Y={class:"checklist-actions"},tt={key:0,class:"agent-actions"},et={class:"plan-content"},st={class:"plan-section"},nt={class:"section-content"},ot={key:0,class:"plan-section"},lt={class:"target-list"},it={class:"target-icon"},at={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},rt={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ct={key:2,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},dt={class:"target-content"},ut={class:"target-title"},vt={class:"target-description"},ht={key:1,class:"plan-section"},gt={class:"channels-grid"},kt={class:"channel-icon"},pt={key:0,class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},mt={key:1,class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},wt={key:2,class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Ct={key:3,class:"icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},ft={class:"channel-title"},_t={class:"channel-description"},yt={key:2,class:"plan-section"},xt={class:"timeline"},bt={class:"timeline-content"},Mt={class:"timeline-title"},At={class:"timeline-description"},Bt={key:0,class:"timeline-date"},Vt={key:3,class:"modal-overlay"},St={class:"modal-content"},Dt={class:"modal-actions"},Pt={__name:"MarketingPlanDetail",setup(Ht){const g=z(),k=L(),u=F(),p=O(),s=m(null),b=w(()=>u.isLoading),v=m(!1),d=m(null),M=w(()=>!s.value||!s.value.assignedAgents?!1:p.currentRole==="agent"?s.value.assignedAgents.includes(p.getCurrentUser().name):!1),A=w(()=>p.currentRole==="admin");H(async()=>{const i=k.params.id;try{s.value=await u.plans.getPlanById(i),s.value?await B():console.error("Plan not found")}catch(e){console.error("Error loading plan:",e)}});const B=async()=>{if(!s.value)return;await u.checklists.fetchChecklists();const i=u.checklists.marketingChecklists.find(e=>e.convertedFromPlan&&e.convertedFromPlan.id===k.params.id);i&&(d.value=i)},y=()=>{g.push("/marketing-tools")},V=()=>{v.value=!0},S=async()=>{try{const i={id:Date.now().toString(),title:`Checklist: ${s.value.title}`,description:s.value.strategyOverview,items:[],status:"draft",progress:0,creationDate:new Date().toISOString(),completed:!1,convertedFromPlan:{id:k.params.id,title:s.value.title}};s.value.targetAudiences&&s.value.targetAudiences.length&&i.items.push({text:"Review target audiences",completed:!1}),s.value.channels&&s.value.channels.length&&s.value.channels.forEach(r=>{i.items.push({text:`Set up ${r.name}`,completed:!1})}),s.value.timeline&&s.value.timeline.length&&s.value.timeline.forEach(r=>{i.items.push({text:r.title,completed:!1})}),i.items.push({text:"Mark plan as complete",completed:!1}),await u.checklists.saveChecklist(i);const e=u.plans.marketingPlans,l=e.findIndex(r=>r.title===s.value.title&&r.creationDate===s.value.creationDate);l!==-1&&(e[l].status="Active",localStorage.setItem("marketingPlans",JSON.stringify(e))),d.value=i,v.value=!1,alert("Plan converted to checklist successfully!")}catch(i){console.error("Error converting plan to checklist:",i),alert("Failed to convert plan to checklist. Please try again.")}},D=()=>{d.value&&g.push(`/marketing-tools/checklist/${d.value.id}`)},P=()=>{g.push("/marketing-tools/admin-checklists")},x=(i,e=!1)=>{if(!i)return"";const l=new Date(i);return e?l.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):l.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})};return(i,e)=>(o(),n(h,null,[b.value?(o(),n("div",T,e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Loading plan details...",-1)]))):s.value?(o(),n("div",E,[t("div",N,[t("button",{class:"back-button",onClick:y},e[5]||(e[5]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M19 12H5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M12 19L5 12L12 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),C(" Back to Home ")])),t("h1",$,a(s.value.title),1),t("div",U,[t("span",Z,"Created: "+a(x(s.value.creationDate)),1),s.value.creator?(o(),n("div",J,[e[6]||(e[6]=t("span",{class:"creator-label"},"Created by:",-1)),t("span",q,a(s.value.creator.name),1),t("span",{class:f(["creator-role",s.value.creator.role])},a(s.value.creator.role),3)])):c("",!0),t("div",{class:f(["status-badge",s.value.status?s.value.status.toLowerCase():"draft"])},a(s.value.status||"Draft"),3)]),s.value.assignedAgents&&s.value.assignedAgents.length>0?(o(),n("div",G,[e[7]||(e[7]=t("span",{class:"assigned-label"},"Assigned to:",-1)),t("span",K,a(s.value.assignedAgents.join(", ")),1)])):c("",!0),d.value?(o(),n("div",Q,[e[9]||(e[9]=t("div",{class:"checklist-badge"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",width:"16",height:"16"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),t("span",null,"Converted to Checklist")],-1)),t("div",W,[t("div",{class:"progress-bar",style:j({width:`${d.value.progress}%`})},null,4)]),t("div",X,[t("span",null,"Progress: "+a(d.value.progress)+"%",1),t("div",Y,[t("button",{onClick:D,class:"view-checklist-btn"},"View Checklist"),A.value?(o(),n("button",{key:0,onClick:P,class:"admin-overview-btn"},e[8]||(e[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",width:"14",height:"14"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),C(" Admin Overview ")]))):c("",!0)])])])):c("",!0)]),M.value&&!d.value?(o(),n("div",tt,[t("button",{onClick:V,class:"convert-btn"},e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",width:"16",height:"16"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),C(" Convert to Checklist ")]))])):c("",!0),t("div",et,[t("div",st,[e[11]||(e[11]=t("h2",{class:"section-title"},"Strategy Overview",-1)),t("p",nt,a(s.value.strategyOverview),1)]),s.value.targetAudiences&&s.value.targetAudiences.length>0?(o(),n("div",ot,[e[15]||(e[15]=t("h2",{class:"section-title"},"Target Audience",-1)),t("ul",lt,[(o(!0),n(h,null,_(s.value.targetAudiences,(l,r)=>(o(),n("li",{key:r,class:"target-item"},[t("div",it,[l.icon==="user-group"?(o(),n("svg",at,e[12]||(e[12]=[t("path",{d:"M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):l.icon==="briefcase"?(o(),n("svg",rt,e[13]||(e[13]=[t("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",stroke:"currentColor","stroke-width":"2"},null,-1),t("path",{d:"M16 7V4C16 2.89543 15.1046 2 14 2H10C8.89543 2 8 2.89543 8 4V7",stroke:"currentColor","stroke-width":"2"},null,-1)]))):(o(),n("svg",ct,e[14]||(e[14]=[t("path",{d:"M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),t("path",{d:"M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))]),t("div",dt,[t("h3",ut,a(l.title),1),t("p",vt,a(l.description),1)])]))),128))])])):c("",!0),s.value.channels&&s.value.channels.length>0?(o(),n("div",ht,[e[20]||(e[20]=t("h2",{class:"section-title"},"Marketing Channels",-1)),t("div",gt,[(o(!0),n(h,null,_(s.value.channels,(l,r)=>(o(),n("div",{key:r,class:f(["channel-card",{highlighted:l.highlight}])},[t("div",kt,[l.icon==="instagram"?(o(),n("svg",pt,e[16]||(e[16]=[t("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.33.04-4.61-1.04-5.94-2.95-1.32-1.91-1.85-4.38-1.48-6.65.38-2.27 1.76-4.27 3.71-5.49 1.95-1.22 4.34-1.58 6.61-.98v4.03c-.93-.38-1.92-.62-2.92-.71-1-.09-2.02.05-2.94.41-.92.36-1.72 1.02-2.27 1.81-.55.79-.85 1.74-.85 2.69 0 .95.3 1.9.85 2.69.55.79 1.35 1.45 2.27 1.81.92.36 1.94.5 2.94.41 1-.09 1.99-.33 2.92-.71 1.93-.76 3.37-2.49 3.88-4.48.51-1.99.41-4.07.31-6.11v-8.75z"},null,-1)]))):l.icon==="facebook"?(o(),n("svg",mt,e[17]||(e[17]=[t("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"},null,-1)]))):l.icon==="email"?(o(),n("svg",wt,e[18]||(e[18]=[t("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"},null,-1)]))):(o(),n("svg",Ct,e[19]||(e[19]=[t("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"},null,-1)])))]),t("h3",ft,a(l.name),1),t("p",_t,a(l.description),1)],2))),128))])])):c("",!0),s.value.timeline&&s.value.timeline.length>0?(o(),n("div",yt,[e[22]||(e[22]=t("h2",{class:"section-title"},"Timeline",-1)),t("div",xt,[(o(!0),n(h,null,_(s.value.timeline,(l,r)=>(o(),n("div",{key:r,class:"timeline-item"},[e[21]||(e[21]=t("div",{class:"timeline-marker"},null,-1)),t("div",bt,[t("h3",Mt,a(l.title),1),t("p",At,a(l.description),1),l.date?(o(),n("p",Bt,"Due by: "+a(x(l.date,!0)),1)):c("",!0)])]))),128))])])):c("",!0)])])):(o(),n("div",R,[e[2]||(e[2]=t("div",{class:"error-icon"},"❌",-1)),e[3]||(e[3]=t("h3",null,"Plan Not Found",-1)),e[4]||(e[4]=t("p",null,"The marketing plan you're looking for could not be found.",-1)),t("button",{class:"back-button-primary",onClick:y},"Back to Plans")])),v.value?(o(),n("div",Vt,[t("div",St,[e[23]||(e[23]=t("h2",null,"Convert to Checklist",-1)),e[24]||(e[24]=t("p",null,"Are you sure you want to convert this marketing plan to a checklist?",-1)),e[25]||(e[25]=t("p",{class:"modal-note"},"This will create a new checklist you can track progress on.",-1)),t("div",Dt,[t("button",{onClick:e[0]||(e[0]=l=>v.value=!1),class:"cancel-btn"},"Cancel"),t("button",{onClick:S,class:"confirm-btn"},"Convert")])])])):c("",!0)],64))}},Ft=I(Pt,[["__scopeId","data-v-e0059827"]]);export{Ft as default};
