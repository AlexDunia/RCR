import{g as I,c as k,h as V,b as r,i as o,e as t,F as C,f as x,y as U,k as oe,l as D,v as i,t as c,n as L,o as ne,r as M,j as O,u as B,I as R,L as re,N as ae,m as le,A as ie}from"./vendor.Bh3_gxHF.js";import{u as ce}from"./marketingStore.D46PyJfU.js";import{_ as T,b as H,i as ue}from"./index.Cv61STol.js";import{L as de}from"./Loader.DRAEMdx-.js";const ge={class:"marketing-nav"},ve={class:"nav-content"},he={class:"nav-icon"},me={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ke={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pe={key:2,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},we={key:3,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe={key:4,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ce={key:5,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ye={__name:"MarketingNavigation",setup(j){const u=I(),A=H(),d=k(()=>A.currentRole==="admin"),p=k(()=>d.value?[{name:"Success Plan",path:"/marketing-tools/success-plan"},{name:"Checklist Overview",path:"/marketing-tools/admin-checklists"},{name:"Social Insights",path:"/marketing-tools/admin-social"},{name:"Done for You",path:"/marketing-tools/done-for-you"}]:[{name:"Success Plan",path:"/marketing-tools/success-plan"},{name:"My Checklist",path:"/marketing-tools/checklist"},{name:"Done for You",path:"/marketing-tools/done-for-you"},{name:"Social Platforms",path:"/marketing-tools/social-platforms"}]),F=k(()=>g=>g.path==="/marketing-tools/success-plan"?u.path==="/marketing-tools"||u.path==="/marketing-tools/success-plan"||u.path.includes("/marketing-tools/plan/"):g.path==="/marketing-tools/admin-checklists"?u.path==="/marketing-tools/admin-checklists":g.path==="/marketing-tools/admin-social"?u.path==="/marketing-tools/admin-social":u.path===g.path);return(g,l)=>{const b=V("router-link");return o(),r("nav",ge,[t("div",ve,[(o(!0),r(C,null,x(p.value,(h,S)=>(o(),U(b,{key:S,to:h.path,class:L(["nav-link",{active:F.value(h)}])},{default:oe(()=>[t("div",he,[h.name==="Success Plan"?(o(),r("svg",me,l[0]||(l[0]=[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor","stroke-width":"2"},null,-1),t("path",{d:"M8 12L11 15L16 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):i("",!0),h.name==="My Checklist"?(o(),r("svg",ke,l[1]||(l[1]=[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor","stroke-width":"2"},null,-1),t("path",{d:"M8 12H16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),t("path",{d:"M8 8H16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),t("path",{d:"M8 16H16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1)]))):i("",!0),h.name==="Done for You"?(o(),r("svg",pe,l[2]||(l[2]=[t("path",{d:"M5 12L9 16L19 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):i("",!0),h.name==="Social Platforms"?(o(),r("svg",we,l[3]||(l[3]=[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1),t("path",{d:"M12 8V16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),t("path",{d:"M8 12H16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1)]))):i("",!0),h.name==="Checklist Overview"?(o(),r("svg",fe,l[4]||(l[4]=[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor","stroke-width":"2"},null,-1),t("circle",{cx:"12",cy:"7",r:"1",fill:"currentColor"},null,-1),t("rect",{x:"7",y:"12",width:"10",height:"2",rx:"1",fill:"currentColor"},null,-1),t("rect",{x:"7",y:"16",width:"10",height:"2",rx:"1",fill:"currentColor"},null,-1)]))):i("",!0),h.name==="Social Insights"?(o(),r("svg",Ce,l[5]||(l[5]=[t("path",{d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),t("rect",{x:"10",y:"8",width:"10",height:"12",rx:"2",stroke:"currentColor","stroke-width":"2"},null,-1),t("line",{x1:"14",y1:"12",x2:"16",y2:"12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1),t("line",{x1:"14",y1:"16",x2:"16",y2:"16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},null,-1)]))):i("",!0)]),D(" "+c(h.name),1)]),_:2},1032,["to","class"]))),128))])])}}},_e=T(ye,[["__scopeId","data-v-8e033c04"]]),xe={class:"marketing-tools"},Ae={class:"content-area"},be={key:0,class:"header-action-row"},Pe={key:0,class:"status-filter-buttons"},Me=["onClick"],Le={key:1,class:"admin-top-actions"},Se={key:1,class:"back-navigation"},$e={key:2,class:"admin-search-filters"},Fe={class:"search-bar"},Be={class:"filter-options"},De={class:"filter-pills"},Ne=["onClick"],Ee={key:3,class:"content-loader"},Oe={key:0,class:"success-plans"},Re={key:0,class:"empty-state"},Ie={key:1,class:"permission-message"},Ve={key:1,class:"empty-state"},Ue={key:2,class:"plans-container"},Te={key:0,class:"search-results-count"},He=["onClick"],je={class:"plan-header"},ze={class:"plan-info"},Ye={class:"date"},qe={key:0,class:"creator-badge"},Qe={class:"creator-name"},Ge={class:"description"},Je={class:"card-footer"},Ke={key:0,class:"assigned-agents"},We={class:"agent-name"},Xe={__name:"MarketingTools",setup(j){const u=le(),A=I(),d=ce(),p=H(),F=k(()=>d.isLoading),g=k(()=>{const n=ue("create-marketing-plans"),e=p.currentRole==="admin";return n&&e}),l=["#1E3A8A","#1D4ED8","#0369A1","#0E7490","#065F46","#166534","#3F6212","#854D0E","#92400E","#9A3412","#B91C1C","#991B1B","#831843","#701A75","#581C87","#4338CA","#1E40AF","#0F172A","#374151","#4B5563","#7E22CE","#BE123C","#0F766E","#0C4A6E"];ne(async()=>{await d.plans.fetchPlans(),f.value=d.plans.marketingPlans});const b=k(()=>A.path==="/marketing-tools"||A.path==="/marketing-tools/success-plan"),h=n=>{u.push(`/marketing-tools/plan/${n}`)},S=()=>{if(!g.value)return console.error("Unauthorized access attempt detected"),u.push("/unauthorized");u.push("/marketing-tools/create")},z=n=>n&&n.length>0?n.charAt(0).toUpperCase():"P",Y=n=>{if(!n)return l[0];let e=0;for(let s=0;s<n.length;s++)e+=n.charCodeAt(s);const a=e%l.length;return l[a]},q=n=>{if(!n)return"";const e=new Date(n);return`${e.toLocaleString("default",{month:"short"})} ${e.getDate()}, ${e.getFullYear()}, ${Q(e)}`},Q=n=>{let e=n.getHours();const a=n.getMinutes(),s=e>=12?"pm":"am";e=e%12,e=e||12;const m=a<10?"0"+a:a;return`${e}:${m}${s}`},G=k(()=>{const n=new Set;return d.plans.marketingPlans.forEach(e=>{e.assignedAgents&&e.assignedAgents.length&&e.assignedAgents.forEach(a=>n.add(a)),e.creator&&e.creator.name&&n.add(e.creator.name)}),Array.from(n)}),y=M(""),J=[{value:"title",label:"Title"},{value:"description",label:"Description"},{value:"agent",label:"Agent"}],K=[{value:"",label:"All"},{value:"draft",label:"Draft"},{value:"active",label:"Active"},{value:"completed",label:"Completed"}],_=M(""),v=M([]),w=M(""),$=k(()=>y.value.trim()!==""||v.value.length>0||w.value!==""||_.value!==""),W=k(()=>v.value.includes("agent")),f=M([]),P=()=>{if(!$.value){if(p.currentRole==="agent"){const e=p.getCurrentUser().name;f.value=d.plans.marketingPlans.filter(a=>a.assignedAgents&&a.assignedAgents.includes(e))}else f.value=d.plans.marketingPlans;return}let n=d.plans.marketingPlans;if(p.currentRole==="agent"){const e=p.getCurrentUser().name;n=n.filter(a=>a.assignedAgents&&a.assignedAgents.includes(e))}f.value=n.filter(e=>{let a=!0;if(y.value.trim()!==""){const s=y.value.toLowerCase();if(v.value.length===0)a=e.title&&e.title.toLowerCase().includes(s)||e.strategyOverview&&e.strategyOverview.toLowerCase().includes(s)||e.assignedAgents&&e.assignedAgents.some(m=>m.toLowerCase().includes(s))||e.creator&&e.creator.name&&e.creator.name.toLowerCase().includes(s);else if(a=!1,v.value.includes("title")&&e.title&&(a=a||e.title.toLowerCase().includes(s)),v.value.includes("description")&&e.strategyOverview&&(a=a||e.strategyOverview.toLowerCase().includes(s)),v.value.includes("agent")){const m=e.assignedAgents&&e.assignedAgents.some(se=>se.toLowerCase().includes(s)),E=e.creator&&e.creator.name&&e.creator.name.toLowerCase().includes(s);a=a||m||E}}if(w.value&&v.value.includes("agent")){const s=e.assignedAgents&&e.assignedAgents.includes(w.value)||e.creator&&e.creator.name===w.value;a=a&&s}return _.value&&(a=a&&e.status&&e.status.toLowerCase()===_.value.toLowerCase()),a})},X=n=>{_.value=n,P()},Z=n=>{const e=v.value.indexOf(n);e===-1?v.value.push(n):v.value.splice(e,1),P()},N=()=>{y.value="",v.value=[],w.value="",_.value="",P()},ee=n=>d.plans.marketingPlans.findIndex(e=>e.title===n.title&&e.creationDate===n.creationDate),te=()=>{window.history.length>1?u.back():u.push("/marketing-tools")};return(n,e)=>{const a=V("router-view");return o(),r("div",xe,[O(_e),t("div",Ae,[b.value?(o(),r("div",be,[g.value?(o(),r("div",Pe,[(o(),r(C,null,x(K,s=>t("button",{key:s.value,class:L(["status-option",{active:_.value===s.value}]),onClick:m=>X(s.value)},c(s.label),11,Me)),64))])):i("",!0),g.value?(o(),r("div",Le,[t("button",{class:"create-plan-top-btn",onClick:S},e[2]||(e[2]=[t("span",{class:"btn-icon"},"+",-1),D(" Create New Plan ")]))])):i("",!0)])):i("",!0),B(A).path.includes("/create")?(o(),r("div",Se,[t("button",{onClick:te,class:"back-btn"},e[3]||(e[3]=[t("span",{class:"back-icon"},"â†",-1),D(" Back to Plans ")]))])):i("",!0),g.value&&b.value?(o(),r("div",$e,[t("div",Fe,[R(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>y.value=s),placeholder:"Search plans...",onInput:P},null,544),[[re,y.value]]),e[4]||(e[4]=t("button",{class:"search-btn"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"search-icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),t("div",Be,[e[6]||(e[6]=t("div",{class:"filter-label"},"Filter by:",-1)),t("div",De,[(o(),r(C,null,x(J,s=>t("button",{key:s.value,class:L(["filter-pill",{active:v.value.includes(s.value)}]),onClick:m=>Z(s.value)},c(s.label),11,Ne)),64))]),W.value?R((o(),r("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),class:"agent-filter",onChange:P},[e[5]||(e[5]=t("option",{value:""},"All Agents",-1)),(o(!0),r(C,null,x(G.value,s=>(o(),r("option",{key:s},c(s),1))),128))],544)),[[ae,w.value]]):i("",!0),$.value?(o(),r("button",{key:1,class:"clear-filters",onClick:N}," Clear Filters ")):i("",!0)])])):i("",!0),F.value?(o(),r("div",Ee,[(o(),r(C,null,x(3,s=>O(de,{key:s})),64))])):(o(),r(C,{key:4},[b.value?(o(),r("div",Oe,[B(d).plans.marketingPlans.length===0?(o(),r("div",Re,[e[7]||(e[7]=t("div",{class:"empty-icon"},"ðŸ“‹",-1)),e[8]||(e[8]=t("h3",null,"No Marketing Plans Yet",-1)),e[9]||(e[9]=t("p",null,"Create your first marketing plan to get started",-1)),g.value?(o(),r("button",{key:0,class:"create-plan-btn",onClick:S},"Create New Plan")):(o(),r("p",Ie,"Please contact an administrator to create a marketing plan"))])):f.value.length===0&&$.value?(o(),r("div",Ve,[e[10]||(e[10]=t("div",{class:"empty-icon"},"ðŸ”",-1)),e[11]||(e[11]=t("h3",null,"No Matching Plans",-1)),e[12]||(e[12]=t("p",null,"No plans match your search criteria",-1)),t("button",{class:"clear-filters-btn",onClick:N},"Clear Filters")])):(o(),r("div",Ue,[g.value&&$.value?(o(),r("div",Te," Showing "+c(f.value.length)+" of "+c(B(d).plans.marketingPlans.length)+" plans ",1)):i("",!0),(o(!0),r(C,null,x(f.value,(s,m)=>(o(),r("div",{key:m,class:"plan-card",onClick:E=>h(ee(s))},[t("div",je,[t("div",{class:"plan-icon",style:ie({backgroundColor:Y(s.title)})},c(z(s.title)),5),t("div",ze,[t("h3",null,c(s.title),1),t("p",Ye,"Creation date: "+c(q(s.creationDate)),1),s.creator?(o(),r("div",qe,[t("span",Qe,c(s.creator.name),1),t("span",{class:L(["creator-role",s.creator.role])},c(s.creator.role),3)])):i("",!0)]),e[13]||(e[13]=t("button",{class:"view-plan-btn"}," View plan ",-1))]),t("p",Ge,c(s.strategyOverview),1),t("div",Je,[t("span",{class:L(["status",s.status?s.status.toLowerCase():"draft"])},c(s.status||"Draft"),3),s.assignedAgents&&s.assignedAgents.length>0?(o(),r("div",Ke,[e[14]||(e[14]=t("span",{class:"assigned-label"},"Assigned to:",-1)),t("span",We,c(s.assignedAgents.join(", ")),1)])):i("",!0)])],8,He))),128))]))])):(o(),U(a,{key:1}))],64))])])}}},ot=T(Xe,[["__scopeId","data-v-85c2710f"]]);export{ot as default};
