import{c as _,r as c,o as Q,p as G,b as r,e as t,j as K,v as u,n as b,y as W,l as g,k as X,h as Y,F as V,f as E,I as O,L as Z,N as ee,t as m,m as te,i as l,s as D,A as se}from"./vendor.Bh3_gxHF.js";import{C as oe}from"./ConfirmationModal.CCQCvGTg.js";import{u as le}from"./marketingStore.D46PyJfU.js";import{_ as ne,b as re}from"./index.Cv61STol.js";const ie={class:"checklist-container"},ae={class:"card-container"},ce={class:"action-bar-content"},de={class:"checklist-actions"},ue={class:"filter-tabs",role:"tablist"},ve=["onClick","aria-selected"],ke={key:0,class:"action-bar-spacer"},he={class:"search-container"},me={class:"search-bar"},pe={class:"sort-dropdown"},we={class:"checklist-content"},ge={key:0,class:"bulk-actions"},fe=["onClick"],ye={class:"card-checkbox"},Ce=["checked","onClick","aria-label"],xe={class:"card-emoji"},_e={class:"card-content"},be={class:"creation-date"},De={class:"progress-section"},Se={key:0,class:"progress-info"},Me={class:"progress-text"},Be={key:0,class:"draft-badge"},Le=["title"],Ne={key:1,class:"completed-badge"},Ae={key:2,class:"progress-bar"},Ve={class:"card-actions"},Ee=["onClick"],Oe=["onClick"],je={key:2,class:"empty-state"},Te={__name:"MyChecklist",setup($e){const C=te(),S=le(),j=re(),M=_(()=>j.currentRole==="admin"),f=c(""),v=c("all"),p=c("newest"),i=c([]),a=_(()=>S.checklists.marketingChecklists),k=c(!1),d=c({title:"",message:"",type:"default",confirmText:"Confirm",onConfirm:()=>{}}),h=c(!1),x=c(null),T=[{label:"All",value:"all"},{label:"Drafts",value:"drafts"},{label:"Completed",value:"completed"}],w=async()=>{try{await S.checklists.fetchChecklists()}catch(s){console.error("Error loading checklists:",s)}},B=()=>{if(!x.value)return;const s=x.value.getBoundingClientRect().top,e=document.querySelector(".marketing-nav");s<=150?h.value||(h.value=!0,e&&(e.style.display="none")):h.value&&(h.value=!1,e&&(e.style.display=""))},L=s=>{s.key==="marketingChecklists"&&w()};Q(async()=>{w(),window.addEventListener("storage",L),window.addEventListener("scroll",B)}),G(()=>{window.removeEventListener("storage",L),window.removeEventListener("scroll",B)});const N=_(()=>{let s=[];if(!a.value||a.value.length===0)return[];if(v.value==="all"?s=a.value:v.value==="drafts"?s=a.value.filter(e=>!e.completed):v.value==="completed"&&(s=a.value.filter(e=>e.completed)),f.value){const e=f.value.toLowerCase();s=s.filter(n=>n.title.toLowerCase().includes(e)||n.description&&n.description.toLowerCase().includes(e))}return s=[...s].sort((e,n)=>p.value==="newest"?new Date(n.creationDate)-new Date(e.creationDate):p.value==="oldest"?new Date(e.creationDate)-new Date(n.creationDate):p.value==="progress"?(e.progress||0)-(n.progress||0):0),s}),$=s=>new Date(s).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),F=s=>s.dueDate?new Date(s.dueDate)<new Date:!1,H=s=>{if(!s.dueDate)return 0;const e=new Date-new Date(s.dueDate);return Math.floor(e/(1e3*60*60*24))},A=()=>{C.push("/marketing-tools/checklist/create")},I=s=>{C.push(`/marketing-tools/checklist/${s}`)},U=s=>{C.push(`/marketing-tools/checklist/${s}/edit`)},z=async s=>{d.value={title:"Delete Checklist",message:"Are you sure you want to delete this checklist? This action cannot be undone.",type:"danger",confirmText:"Delete",onConfirm:async()=>{try{const e=a.value.filter(n=>n.id!==s);localStorage.setItem("marketingChecklists",JSON.stringify(e)),await w(),k.value=!1}catch(e){console.error("Error deleting checklist:",e)}}},k.value=!0},R=s=>{const e=i.value.indexOf(s);e===-1?i.value.push(s):i.value.splice(e,1)},J=async()=>{try{const s=a.value.map(e=>i.value.includes(e.id)?{...e,status:"completed",progress:100,items:e.items.map(n=>({...n,completed:!0}))}:e);localStorage.setItem("checklists",JSON.stringify(s)),w(),i.value=[]}catch(s){console.error("Error marking checklists as completed:",s)}},P=()=>{k.value=!0,d.value={title:"Delete Selected",message:`Are you sure you want to delete ${i.value.length} selected checklist(s)? This action cannot be undone.`,type:"delete",confirmText:"Delete",onConfirm:async()=>{try{const s=a.value.filter(e=>!i.value.includes(e.id));localStorage.setItem("checklists",JSON.stringify(s)),w(),i.value=[]}catch(s){console.error("Error deleting selected checklists:",s)}}}},q=s=>s.charAt(0).toUpperCase();return(s,e)=>{const n=Y("router-link");return l(),r("div",ie,[t("div",ae,[t("div",{class:b(["checklist-action-bar",{fixed:h.value}])},[t("div",ce,[t("div",de,[M.value?u("",!0):(l(),r("button",{key:0,class:"create-btn",onClick:A},e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"icon"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),g(" Create Checklist ")]))),M.value?(l(),W(n,{key:1,to:"/marketing-tools/admin-checklists",class:"admin-view-btn"},{default:X(()=>e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"icon"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("line",{x1:"9",y1:"9",x2:"15",y2:"9"}),t("line",{x1:"9",y1:"12",x2:"15",y2:"12"}),t("line",{x1:"9",y1:"15",x2:"15",y2:"15"})],-1),g(" Admin Overview ")])),_:1})):u("",!0)]),t("div",ue,[(l(),r(V,null,E(T,o=>t("button",{key:o.value,class:b(["filter-tab",{active:v.value===o.value}]),onClick:y=>v.value=o.value,"aria-selected":v.value===o.value,role:"tab"},m(o.label),11,ve)),64))])])],2),h.value?(l(),r("div",ke)):u("",!0),t("div",he,[t("div",me,[e[6]||(e[6]=t("svg",{class:"search-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),O(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),placeholder:"Search checklists...","aria-label":"Search checklists"},null,512),[[Z,f.value]])]),t("div",pe,[O(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>p.value=o),"aria-label":"Sort checklists"},e[7]||(e[7]=[t("option",{value:"newest"},"Newest First",-1),t("option",{value:"oldest"},"Oldest First",-1),t("option",{value:"progress"},"Progress (Low to High)",-1)]),512),[[ee,p.value]])])]),t("div",we,[i.value.length>0?(l(),r("div",ge,[t("span",null,m(i.value.length)+" selected",1),t("button",{class:"bulk-action-btn",onClick:J},e[8]||(e[8]=[t("svg",{class:"btn-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),g(" Mark as Completed ")])),t("button",{class:"bulk-action-btn delete",onClick:P},e[9]||(e[9]=[t("svg",{class:"btn-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),g(" Delete Selected ")]))])):u("",!0),N.value.length>0?(l(),r("div",{key:1,class:"checklist-cards",ref_key:"checklistCards",ref:x},[(l(!0),r(V,null,E(N.value,o=>(l(),r("div",{key:o.id,class:b(["checklist-card",{"is-selected":i.value.includes(o.id)}]),onClick:y=>I(o.id)},[t("div",ye,[t("input",{type:"checkbox",checked:i.value.includes(o.id),onClick:D(y=>R(o.id),["stop"]),"aria-label":"Select "+o.title},null,8,Ce)]),t("div",xe,m(q(o.title)),1),t("div",_e,[t("h3",null,m(o.title),1),t("p",be,"Creation date: "+m($(o.creationDate)),1),t("div",De,[o.completed?(l(),r("div",Ne," Completed ")):(l(),r("div",Se,[t("span",Me,"Progress: "+m(o.progress)+"% done",1),o.status==="draft"?(l(),r("span",Be,"Draft")):u("",!0),F(o)?(l(),r("span",{key:1,class:"overdue-badge",title:"Overdue by "+H(o)+" days"},e[10]||(e[10]=[t("svg",{class:"overdue-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("circle",{cx:"12",cy:"12",r:"10","stroke-width":"2"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6l4 2"})],-1),g(" Overdue ")]),8,Le)):u("",!0)])),o.completed?u("",!0):(l(),r("div",Ae,[t("div",{class:"progress-fill",style:se({width:o.progress+"%"})},null,4)]))])]),t("div",Ve,[t("button",{class:"action-btn edit",onClick:D(y=>U(o.id),["stop"]),"aria-label":"Edit checklist"},e[11]||(e[11]=[t("svg",{class:"action-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Ee),t("button",{class:"action-btn delete",onClick:D(y=>z(o.id),["stop"]),"aria-label":"Delete checklist"},e[12]||(e[12]=[t("svg",{class:"action-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Oe)])],10,fe))),128))],512)):(l(),r("div",je,[e[13]||(e[13]=t("svg",{class:"empty-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2","stroke-width":"2"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v8m-4-4h8"})],-1)),e[14]||(e[14]=t("p",null,"No checklists found for this filter",-1)),t("button",{class:"add-checklist-btn",onClick:A},"Create your first checklist")]))])]),K(oe,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=o=>k.value=o),title:d.value.title,message:d.value.message,type:d.value.type,"confirm-text":d.value.confirmText,onConfirm:d.value.onConfirm,onClose:e[3]||(e[3]=o=>k.value=!1)},null,8,["modelValue","title","message","type","confirm-text","onConfirm"])])}}},ze=ne(Te,[["__scopeId","data-v-d895066d"]]);export{ze as default};
