import{r as d,c as p,o as F,b as n,e,v as R,F as f,f as b,q as w,m as z,i as l,j as H,n as P,t as u}from"./vendor.Bh3_gxHF.js";import{u as U}from"./documents.CHcazOjv.js";import{L as q}from"./Loader.DRAEMdx-.js";import{_ as I}from"./index.Cv61STol.js";const Y={class:"documents-container"},G={key:0,class:"documents-loader"},J={key:1,class:"documents-table"},K={class:"cell title"},O={class:"title-container"},Q=["title"],W={class:"cell description"},X={class:"cell date"},Z={class:"cell action"},ee=["onClick"],te=["onClick"],ae={class:"pagination"},se=["disabled"],oe=["disabled"],ne=["onClick"],le=["disabled"],ie=["disabled"],ce={key:2,class:"modal-overlay"},re={__name:"ProfileDocuments",setup(de){const C=z(),_=U(),v=d(!1),m=d(null),y=d(!0),o=d(1),h=d(10),c=p(()=>Math.ceil(k.value.length/h.value)),x=p(()=>{const t=(o.value-1)*h.value,s=t+h.value;return k.value.slice(t,s)}),r=t=>{t>=1&&t<=c.value&&(o.value=t)},M=()=>r(1),T=()=>r(c.value),V=()=>r(o.value-1),A=()=>r(o.value+1),N=p(()=>{const t=[];let a=Math.max(1,o.value-Math.floor(2.5)),i=Math.min(c.value,a+5-1);i-a+1<5&&(a=Math.max(1,i-5+1));for(let g=a;g<=i;g++)t.push(g);return t});F(()=>{setTimeout(()=>{y.value=!1},1e3)});const k=p(()=>_.documents.slice().sort((t,s)=>new Date(s.createdAt)-new Date(t.createdAt))),L=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),D=t=>{switch(t.type){case"buyer-rep":return`${t.buyerName}'s Buyer Rep Agreement`;case"seller-rep":return`${t.sellerName}'s Seller Rep Agreement`;case"mls":return`MLS Listing - ${t.propertyAddress}`;default:return"Untitled Document"}},S=t=>{C.push({name:"ProfileDocumentEdit",params:{id:t}})},B=t=>{m.value=t,v.value=!0},$=()=>{v.value=!1,m.value=null},j=async()=>{try{await _.deleteDocument(m.value),v.value=!1,m.value=null}catch(t){console.error("Error deleting document:",t)}},E=(t,s)=>t.length<=s?t:t.slice(0,s)+"...";return(t,s)=>(l(),n("div",Y,[s[5]||(s[5]=e("div",{class:"documents-header"},[e("div",null,[e("h2",null,"Your docs"),e("p",null,"A list of all documents you have received, or shared.")])],-1)),y.value?(l(),n("div",G,[(l(),n(f,null,b(3,a=>H(q,{key:a})),64))])):(l(),n("div",J,[s[2]||(s[2]=w('<div class="table-header" data-v-a5e31cfe><div class="header-cell title" data-v-a5e31cfe>Title <span class="sort-icon" data-v-a5e31cfe>↕</span></div><div class="header-cell description" data-v-a5e31cfe>Description <span class="sort-icon" data-v-a5e31cfe>↕</span></div><div class="header-cell date" data-v-a5e31cfe>Date</div><div class="header-cell action" data-v-a5e31cfe>Action</div></div>',1)),(l(!0),n(f,null,b(x.value,a=>(l(),n("div",{key:a.id,class:"table-row"},[e("div",K,[e("div",O,[e("span",{class:P(["document-badge",a.type])},u(a.type),3),e("span",{class:"document-title",title:D(a)},u(E(D(a),30)),9,Q)])]),e("div",W,u(a.description||"No description available"),1),e("div",X,u(L(a.createdAt)),1),e("div",Z,[e("button",{onClick:i=>S(a.id),class:"edit-btn"},s[0]||(s[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,ee),e("button",{onClick:i=>B(a.id),class:"delete-btn"},s[1]||(s[1]=[w('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-a5e31cfe><polyline points="3 6 5 6 21 6" data-v-a5e31cfe></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-a5e31cfe></path><line x1="10" y1="11" x2="10" y2="17" data-v-a5e31cfe></line><line x1="14" y1="11" x2="14" y2="17" data-v-a5e31cfe></line></svg>',1)]),8,te)])]))),128))])),e("div",ae,[e("button",{class:"pagination-btn",onClick:M,disabled:o.value===1},"«",8,se),e("button",{class:"pagination-btn",onClick:V,disabled:o.value===1},"‹",8,oe),(l(!0),n(f,null,b(N.value,a=>(l(),n("button",{key:a,class:P(["pagination-btn",{active:a===o.value}]),onClick:i=>r(a)},u(a),11,ne))),128)),e("button",{class:"pagination-btn",onClick:A,disabled:o.value===c.value},"›",8,le),e("button",{class:"pagination-btn",onClick:T,disabled:o.value===c.value},"»",8,ie)]),v.value?(l(),n("div",ce,[e("div",{class:"modal-container"},[s[3]||(s[3]=e("div",{class:"modal-header"},[e("h3",null,"Confirm Delete")],-1)),s[4]||(s[4]=e("div",{class:"modal-body"},[e("p",null,"Are you sure you want to delete this document?"),e("p",{class:"modal-warning"},"This action cannot be undone.")],-1)),e("div",{class:"modal-footer"},[e("button",{onClick:$,class:"cancel-btn"},"Cancel"),e("button",{onClick:j,class:"confirm-btn"},"Delete")])])])):R("",!0)]))}},he=I(re,[["__scopeId","data-v-a5e31cfe"]]);export{he as default};
