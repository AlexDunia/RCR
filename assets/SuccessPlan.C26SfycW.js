import{r as f,c as k,w as G,o as J,b as r,e as s,y as K,v as g,I as C,l as M,L as W,F as w,f as y,N as X,u as $,k as Z,t as i,m as ee,Q as te,i as o,n as b,A as se}from"./vendor.Bh3_gxHF.js";import{u as ae}from"./marketingStore.D46PyJfU.js";import{M as ne}from"./MarketingContentLoader.CedV_x7k.js";import{_ as oe,b as re,i as B}from"./index.Cv61STol.js";import"./Loader.DRAEMdx-.js";const le={class:"success-plan-container"},ie={class:"marketing-tools-header"},ce={class:"header-with-actions"},ue={key:0,class:"admin-search-filters"},de={class:"search-bar"},ge={class:"filter-options"},ve={class:"filter-pills"},me=["onClick"],he={class:"marketing-tabs"},ke=["onClick"],pe={key:0,class:"loading-container"},fe={key:1,class:"empty-state"},Ce={key:1,class:"permission-message"},we={key:2,class:"empty-state"},ye={class:"success-plans"},be={key:0,class:"security-reminder"},Ae={key:1,class:"search-results-count"},_e={class:"plans-container"},Pe=["onClick"],Le={class:"plan-header"},Se={class:"plan-info"},Fe={class:"date"},De={key:0,class:"creator-badge"},xe={class:"creator-name"},Ee={class:"description"},Me={class:"card-footer"},$e={key:0,class:"assigned-agents"},Be={class:"agent-name"},Ne={__name:"SuccessPlan",setup(ze){const u=ee(),d=ae(),A=re(),S=f("success"),N=k(()=>d.isLoading),m=k(()=>{const t=B("create-marketing-plans"),e=A.currentRole==="admin";return t&&e}),h=f(""),l=f([]),v=f(""),z=[{label:"Title",value:"title"},{label:"Description",value:"description"},{label:"Agent",value:"agent"},{label:"Status",value:"status"}],p=k(()=>h.value.trim()!==""||l.value.length>0||v.value!==""),O=k(()=>l.value.includes("agent")),R=k(()=>{const t=new Set;return d.plans.marketingPlans.forEach(e=>{e.assignedAgents&&e.assignedAgents.length&&e.assignedAgents.forEach(n=>t.add(n)),e.creator&&e.creator.role==="agent"&&t.add(e.creator.name)}),Array.from(t)}),_=k(()=>p.value?d.plans.marketingPlans.filter(t=>{let e=!0;if(h.value.trim()!==""){const n=h.value.toLowerCase();if(l.value.length===0)e=t.title&&t.title.toLowerCase().includes(n)||t.strategyOverview&&t.strategyOverview.toLowerCase().includes(n)||t.assignedAgents&&t.assignedAgents.some(a=>a.toLowerCase().includes(n))||t.creator&&t.creator.name&&t.creator.name.toLowerCase().includes(n);else{if(e=!1,l.value.includes("title")&&t.title&&(e=e||t.title.toLowerCase().includes(n)),l.value.includes("description")&&t.strategyOverview&&(e=e||t.strategyOverview.toLowerCase().includes(n)),l.value.includes("agent")){const a=t.assignedAgents&&t.assignedAgents.some(L=>L.toLowerCase().includes(n)),c=t.creator&&t.creator.name&&t.creator.name.toLowerCase().includes(n);e=e||a||c}l.value.includes("status")&&t.status&&(e=e||t.status.toLowerCase().includes(n))}}if(v.value&&l.value.includes("agent")){const n=t.assignedAgents&&t.assignedAgents.includes(v.value)||t.creator&&t.creator.name===v.value;e=e&&n}return e}):d.plans.marketingPlans),T=t=>d.plans.marketingPlans.findIndex(e=>e.title===t.title&&e.creationDate===t.creationDate),I=t=>{const e=l.value.indexOf(t);e===-1?l.value.push(t):l.value.splice(e,1)},F=()=>{h.value="",l.value=[],v.value=""},D=()=>{};G(()=>A.currentRole,x);function x(){window.location.href.includes("/marketing-tools/create")&&!m.value&&(console.error("Unauthorized access attempt detected"),u.push("/unauthorized"))}J(async()=>{await d.plans.fetchPlans(),x()});const E=()=>{if(!B("create-marketing-plans")||A.currentRole!=="admin")return console.error("Unauthorized create plan attempt"),u.push("/unauthorized");u.push("/marketing-tools/create")},P=["#1E3A8A","#1D4ED8","#0369A1","#0E7490","#065F46","#166534","#3F6212","#854D0E","#92400E","#9A3412","#B91C1C","#991B1B","#831843","#701A75","#581C87","#4338CA","#1E40AF","#0F172A","#374151","#4B5563","#7E22CE","#BE123C","#0F766E","#0C4A6E"],V=t=>({success:"Success Plan",checklist:"My Checklist",done:"Done for You",social:"Social Platforms"})[t],U=t=>{switch(S.value=t,t){case"success":u.push("/marketing-tools/success-plan");break;case"checklist":u.push("/marketing-tools/checklist");break;case"done":u.push("/marketing-tools/done-for-you");break;case"social":u.push("/marketing-tools/social-platforms");break}},Y=t=>{u.push(`/marketing-tools/plan/${t}`)},j=t=>t&&t.length>0?t.charAt(0).toUpperCase():"P",Q=t=>{if(!t)return P[0];let e=0;for(let a=0;a<t.length;a++)e+=t.charCodeAt(a);const n=e%P.length;return P[n]},q=t=>{if(!t)return"";const e=new Date(t);return`${e.toLocaleString("default",{month:"short"})} ${e.getDate()}, ${e.getFullYear()}, ${H(e)}`},H=t=>{let e=t.getHours();const n=t.getMinutes(),a=e>=12?"pm":"am";e=e%12,e=e||12;const c=n<10?"0"+n:n;return`${e}:${c}${a}`};return(t,e)=>{const n=te("can");return o(),r("div",le,[s("div",ie,[s("div",ce,[e[3]||(e[3]=s("div",null,[s("h1",{class:"marketing-tools-title"},"Succezz Plan"),s("p",{class:"marketing-tools-subtitle"},"Create and track your success milestones with our comprehensive planning tools.")],-1)),m.value?C((o(),r("button",{key:0,class:"create-plan-top-btn",onClick:E},e[2]||(e[2]=[s("span",{class:"btn-icon"},"+",-1),M(" Create New Plan ")]))),[[n,"create-marketing-plans"]]):g("",!0)]),m.value?(o(),r("div",ue,[s("div",de,[C(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>h.value=a),placeholder:"Search plans...",onInput:D},null,544),[[W,h.value]]),e[4]||(e[4]=s("button",{class:"search-btn"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"search-icon"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))]),s("div",ge,[e[6]||(e[6]=s("div",{class:"filter-label"},"Filter by:",-1)),s("div",ve,[(o(),r(w,null,y(z,a=>s("button",{key:a.value,class:b(["filter-pill",{active:l.value.includes(a.value)}]),onClick:c=>I(a.value)},i(a.label),11,me)),64))]),O.value?C((o(),r("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=a=>v.value=a),class:"agent-filter",onChange:D},[e[5]||(e[5]=s("option",{value:""},"All Agents",-1)),(o(!0),r(w,null,y(R.value,a=>(o(),r("option",{key:a},i(a),1))),128))],544)),[[X,v.value]]):g("",!0),p.value?(o(),r("button",{key:1,class:"clear-filters",onClick:F}," Clear Filters ")):g("",!0)])])):g("",!0)]),s("div",he,[(o(),r(w,null,y(["success","checklist","done","social"],(a,c)=>s("button",{key:c,class:b(["marketing-tab",{active:S.value===c}]),onClick:L=>U(c)},i(V(c)),11,ke)),64))]),N.value?(o(),r("div",pe,e[7]||(e[7]=[s("div",{class:"loading-spinner"},null,-1),s("p",null,"Loading plans...",-1)]))):$(d).plans.marketingPlans.length===0?(o(),r("div",fe,[e[9]||(e[9]=s("div",{class:"empty-icon"},"📋",-1)),e[10]||(e[10]=s("h3",null,"No Marketing Plans Yet",-1)),e[11]||(e[11]=s("p",null,"Create your first marketing plan to get started",-1)),m.value?C((o(),r("button",{key:0,class:"create-plan-btn",onClick:E},e[8]||(e[8]=[M(" Create New Plan ")]))),[[n,"create-marketing-plans"]]):(o(),r("p",Ce,"Please contact an administrator to create a marketing plan"))])):_.value.length===0&&p.value?(o(),r("div",we,[e[12]||(e[12]=s("div",{class:"empty-icon"},"🔍",-1)),e[13]||(e[13]=s("h3",null,"No Matching Plans",-1)),e[14]||(e[14]=s("p",null,"No plans match your search criteria",-1)),s("button",{class:"clear-filters-btn",onClick:F},"Clear Filters")])):(o(),K(ne,{key:3},{default:Z(()=>[s("div",ye,[m.value?(o(),r("div",be,e[15]||(e[15]=[s("p",null,"As an admin, you have special privileges to create marketing plans. Remember to follow company guidelines.",-1)]))):g("",!0),m.value&&p.value?(o(),r("div",Ae," Showing "+i(_.value.length)+" of "+i($(d).plans.marketingPlans.length)+" plans ",1)):g("",!0),s("div",_e,[(o(!0),r(w,null,y(_.value,(a,c)=>(o(),r("div",{key:c,class:"plan-card",onClick:L=>Y(T(a))},[s("div",Le,[s("div",{class:"plan-icon",style:se({backgroundColor:Q(a.title)})},i(j(a.title)),5),s("div",Se,[s("h3",null,i(a.title),1),s("p",Fe,"Creation date: "+i(q(a.creationDate)),1),a.creator?(o(),r("div",De,[s("span",xe,i(a.creator.name),1),s("span",{class:b(["creator-role",a.creator.role])},i(a.creator.role),3)])):g("",!0)]),e[16]||(e[16]=s("button",{class:"view-plan-btn"}," View plan ",-1))]),s("p",Ee,i(a.strategyOverview),1),s("div",Me,[s("span",{class:b(["status",a.status?a.status.toLowerCase():"draft"])},i(a.status||"Draft"),3),a.assignedAgents&&a.assignedAgents.length>0?(o(),r("div",$e,[e[17]||(e[17]=s("span",{class:"assigned-label"},"Assigned to:",-1)),s("span",Be,i(a.assignedAgents.join(", ")),1)])):g("",!0)])],8,Pe))),128))])])]),_:1}))])}}},Ue=oe(Ne,[["__scopeId","data-v-921cab77"]]);export{Ue as default};
