import{R as Ae,w as ve,b as n,v as k,i as o,e,s as Te,q as j,I as re,L as ce,r as l,c as ct,o as ut,m as vt,g as mt,p as _t,l as xe,t as u,A as G,n as K,F as C,j as ue,f as Q}from"./vendor.Bh3_gxHF.js";import{u as kt,A as ft,C as pt}from"./ClientModal.pJeDofWU.js";import{_ as Ce,c as ht}from"./index.Cv61STol.js";const gt={class:"reminder-modal__form-group"},bt={class:"reminder-modal__form-group"},yt={class:"reminder-modal__form-group"},wt={__name:"ReminderModal",props:{isOpen:{type:Boolean,required:!0},recipient:{type:Object,required:!0},taskData:{type:Object,required:!0}},emits:["close","send"],setup(W,{emit:_}){const R=W,M=_,m=Ae({recipient:"",subject:"",message:""});ve(()=>R.recipient,f=>{f&&(m.recipient=f.email,m.subject="Tour Reminder from Alex",m.message=`Hi ${f.name}, here's a reminder of the task on the 20th of December`)},{immediate:!0});const D=()=>{M("close")},I=async()=>{try{console.log("Sending reminder:",m),M("send",m),D()}catch(f){console.error("Failed to send reminder:",f),alert("Failed to send reminder. Please try again.")}};return(f,c)=>W.isOpen?(o(),n("div",{key:0,class:"reminder-modal__overlay",onClick:D},[e("div",{class:"reminder-modal",role:"dialog","aria-modal":"true","aria-label":"Compose reminder modal",onClick:c[3]||(c[3]=Te(()=>{},["stop"]))},[e("header",{class:"reminder-modal__header"},[c[7]||(c[7]=e("h2",{class:"reminder-modal__title"},"Compose a reminder",-1)),e("div",{class:"reminder-modal__controls"},[c[5]||(c[5]=e("button",{class:"reminder-modal__control-btn","aria-label":"Minimize"},[e("span",{class:"reminder-modal__control-icon"},"â”€")],-1)),c[6]||(c[6]=e("button",{class:"reminder-modal__control-btn","aria-label":"Maximize"},[e("span",{class:"reminder-modal__control-icon"},"â›¶")],-1)),e("button",{class:"reminder-modal__control-btn",onClick:D,"aria-label":"Close"},c[4]||(c[4]=[e("span",{class:"reminder-modal__control-icon"},"Ã—",-1)]))])]),e("form",{class:"reminder-modal__form",onSubmit:Te(I,["prevent"])},[e("div",gt,[re(e("input",{type:"email","onUpdate:modelValue":c[0]||(c[0]=b=>m.recipient=b),class:"reminder-modal__input",placeholder:"To",readonly:""},null,512),[[ce,m.recipient]]),c[8]||(c[8]=e("div",{class:"reminder-modal__cc-controls"},[e("button",{type:"button",class:"reminder-modal__cc-btn"},"Cc"),e("button",{type:"button",class:"reminder-modal__cc-btn"},"Bcc")],-1))]),e("div",bt,[re(e("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=b=>m.subject=b),class:"reminder-modal__input",placeholder:"Tour Reminder from Alex",required:""},null,512),[[ce,m.subject]])]),e("div",yt,[re(e("textarea",{"onUpdate:modelValue":c[2]||(c[2]=b=>m.message=b),class:"reminder-modal__textarea",placeholder:"Hi Lucas, here's a reminder of the task on the 20th of December",required:""},null,512),[[ce,m.message]])]),c[9]||(c[9]=j('<footer class="reminder-modal__footer" data-v-52302aff><div class="reminder-modal__actions" data-v-52302aff><button type="submit" class="reminder-modal__send-btn" data-v-52302aff> Send </button><div class="reminder-modal__icons" data-v-52302aff><button type="button" class="reminder-modal__icon-btn" aria-label="More options" data-v-52302aff><span class="reminder-modal__dots" data-v-52302aff>â‹®</span></button><button type="button" class="reminder-modal__icon-btn" aria-label="Delete" data-v-52302aff><span class="reminder-modal__trash" data-v-52302aff>ðŸ—‘</span></button></div></div></footer>',1))],32)])])):k("",!0)}},Dt=Ce(wt,[["__scopeId","data-v-52302aff"]]),St={class:"task-detail__headerbg"},Tt={class:"task-detail__header"},xt={class:"task-detail__flex-container"},At={class:"task-detail__header-left"},Ct={class:"task-detail__status-group"},Mt={class:"task-detail__date"},It={class:"task-detail__color"},Pt={class:"task-detail__status-container"},Ft={class:"task-detail__timer-label"},$t={class:"task-detail__timer-display"},Ot={class:"task-detail__header-actions"},Nt=["aria-label","disabled"],Vt={class:"task-detail",role:"main","aria-label":"Task management details"},jt={key:0,class:"task-detail__loading-skeleton"},Rt={key:1,class:"task-detail__grid"},Jt={class:"task-detail__left-column"},Bt={class:"task-detail__section","aria-label":"Agents involved in this task"},Lt={class:"task-detail__agent-list"},Et=["onMouseover","onMouseleave"],Ht=["src","alt"],Ut={class:"task-detail__agent-info"},zt={class:"task-detail__agent-name"},qt={class:"task-detail__agent-email"},Yt=["onClick","aria-label"],Xt=["onClick","aria-label"],Gt={class:"task-detail__section","aria-label":"Clients involved in this task"},Kt={class:"task-detail__agent-list"},Qt=["onMouseover","onMouseleave"],Wt=["src","alt"],Zt={class:"task-detail__agent-info"},ea={class:"task-detail__agent-name"},ta={class:"task-detail__agent-email"},aa=["onClick","aria-label"],sa=["onClick","aria-label"],ia={class:"task-detail__right-column"},la={class:"task-detail__column description"},na={"aria-label":"Task description"},oa={class:"task-detail__description-header taskdetails"},da={class:"task-detail__description-list"},ra={class:"task-detail__section task-detail__section--timeline","aria-label":"Task timeline"},ca={class:"task-detail__timeline"},ua={class:"task-detail__timeline-item"},va={class:"task-detail__timeline-checkbox"},ma={class:"task-detail__timeline-time"},_a={class:"task-detail__timeline-item"},ka={class:"task-detail__timeline-checkbox"},fa={class:"task-detail__timeline-time"},pa={class:"task-detail__section task-detail__section--attachments","aria-label":"Task attachments"},ha={key:0,class:"task-detail__attachments-list"},ga={class:"task-detail__attachment-name"},ba={class:"task-detail__attachment-actions"},ya=["onClick","onMouseover"],wa=["onClick","onMouseover"],Da=["onClick","onMouseover"],Sa={key:1,class:"task-detail__no-attachments"},Ta={key:2,class:"confirmation-overlay"},xa={class:"confirmation-card"},Aa={class:"confirmation-title"},Ca={class:"confirmation-text"},Ma={key:3,class:"confirmation-overlay"},Ia={class:"confirmation-card"},Pa={class:"confirmation-title"},Fa={key:0,class:"confirmation-text"},$a={key:1,class:"confirmation-text"},Oa={key:2,class:"file-input-container"},Na={key:4,class:"confirmation-overlay"},Va={class:"confirmation-card"},ja={class:"confirmation-text"},Ra={__name:"TaskDetail",setup(W){const _=vt(),R=mt(),M=ht(),{checkAccess:m}=kt(),D=l(!0),I=l(!1),f=l(!1),c=l(!1),b=l(null),Z=l(!1),me=l(0),_e=l(0),P=l(!1),F=l(""),$=l(""),J=l(0),B=l(0),L=l(new Set),ee=l(!1),E=l(""),te=l(""),p=l(!1),ae=l(!1),y=l(""),se=l(""),S=l(null),H=l(!1),O=l(null),T=l(null),N=l(!1),U=l(!1),x=l(null),s=Ae({id:null,name:"",status:"draft",startDate:"",startTime:"",endDate:"",endTime:"Fri, 16 May 02:00-3:00pm",priority:"Medium",description:[],agentDetails:[],clientDetails:[],attachments:[{id:1,name:"Strategy-Pitch-Final.pptx",url:"/path/to/Strategy-Pitch-Final.pptx"}],createdAt:"",updatedAt:"",startedAt:"",lastEditedAt:"",isPaused:!1,totalTime:0,timerStopped:!1}),w=l(0),h=l(null),A=l(null),z=l(null),V=l(0),ke=ct(()=>{const t=Math.floor(w.value/1e3),a=Math.floor(t/3600),d=Math.floor(t%3600/60),i=t%60;return`${String(a).padStart(2,"0")}:${String(d).padStart(2,"0")}:${String(i).padStart(2,"0")}`}),fe=t=>{t.target.src="/default-avatar.jpg"},Me=()=>{I.value=!0},Ie=()=>{I.value=!1},Pe=async t=>{try{s.agentDetails=t,await g({agentDetails:t}),console.log("Agents updated successfully:",s.agentDetails),p.value=!0}catch(a){console.error("Failed to update agents:",a),alert("Failed to update agents. Please try again.")}},Fe=()=>{f.value=!0},$e=()=>{f.value=!1},Oe=async t=>{try{s.clientDetails=t,await g({clientDetails:t}),console.log("Clients updated successfully:",s.clientDetails),alert("Clients updated successfully"),p.value=!0}catch(a){console.error("Failed to update clients:",a),alert("Failed to update clients. Please try again.")}},pe=t=>{b.value=t,c.value=!0},Ne=()=>{c.value=!1,b.value=null},Ve=async t=>{try{alert(`Reminder sent to ${t.recipient}`)}catch(a){console.error("Failed to send reminder:",a),alert("Failed to send reminder. Please try again.")}},je=async()=>{try{s.isPaused=!0,Le(),await g({isPaused:!0,pausedAt:new Date().toISOString(),elapsedTime:w.value,totalPausedTime:V.value}),console.log("Task paused successfully:",s)}catch(t){console.error("Failed to pause task:",t),alert("Failed to pause task. Please try again.")}},Re=async()=>{try{s.isPaused=!1,Ee(),await g({isPaused:!1,elapsedTime:w.value,totalPausedTime:V.value}),console.log("Task resumed successfully:",s)}catch(t){console.error("Failed to resume task:",t),alert("Failed to resume task. Please try again.")}},Je=async()=>{try{ie(),s.status="completed",s.completedAt=new Date().toISOString(),s.totalTime=w.value,await g({status:"completed",completedAt:s.completedAt,totalTime:s.totalTime,elapsedTimeFormatted:ke.value}),_.push("/tasks/completed")}catch(t){console.error("Failed to end task:",t),alert("Failed to end task. Please try again.")}},he=async()=>{try{if(s.status!=="scheduled"&&s.status!=="draft"){alert("This task cannot be started from its current status.");return}if(s.status==="draft"&&!He()){_.push(`/tasks/${s.id}/edit`);return}s.status="in_progress",s.isPaused=!1,s.startedAt=new Date().toISOString(),A.value=Date.now(),q(),await g({status:"in_progress",isPaused:!1,startedAt:s.startedAt}),console.log("Task started successfully:",s)}catch(t){console.error("Failed to start task:",t),alert("Failed to start task. Please try again.")}},Be=async()=>{try{await g({agentDetails:s.agentDetails,clientDetails:s.clientDetails,attachments:s.attachments,updatedAt:new Date().toISOString()}),console.log("Task saved successfully:",s),_.push("/tasks"),p.value=!1}catch(t){console.error("Failed to save task:",t),alert("Failed to save task. Please try again.")}},q=()=>{if(!h.value){if(le()){s.timerStopped=!0,g({timerStopped:!0});return}A.value=A.value||Date.now(),h.value=setInterval(()=>{if(s.isPaused||le()){ie();return}const t=Date.now();w.value=t-A.value-V.value,nt()},1e3)}},Le=()=>{h.value&&(clearInterval(h.value),h.value=null,z.value=Date.now())},Ee=()=>{z.value&&(V.value+=Date.now()-z.value,z.value=null),q()},ie=()=>{h.value&&(clearInterval(h.value),h.value=null),s.totalTime=w.value,g({totalTime:s.totalTime})},le=()=>{if(!s.endDate||!s.endTime)return!1;const t=new Date,a=new Date(`${s.endDate}T${s.endTime}`);return t>a},He=()=>s.name&&s.description.length>0&&s.agentDetails.length>0&&s.clientDetails.length>0,ge=t=>t?new Date(t).toLocaleString("en-US",{weekday:"short",day:"numeric",month:"short",hour:"numeric",minute:"numeric",hour12:!0}):"",Y=t=>{E.value=t,te.value=t==="save"?"Do you wish to save new changes to this task?":`${t.charAt(0).toUpperCase()+t.slice(1)} this task?`,ee.value=!0},be=()=>{ee.value=!1,E.value="",te.value=""},Ue=async()=>{switch(E.value){case"pause":await je();break;case"resume":await Re();break;case"end":await Je();break;case"save":await Be();break}be()},ze=t=>{me.value=t.pageX,_e.value=t.pageY+20},ne=(t,a)=>{J.value=t.pageX,B.value=t.pageY+20},qe=()=>{Z.value=!0},Ye=()=>{Z.value=!1},ye=(t,a)=>{y.value=t,S.value={...a},se.value=`Do you wish to ${t} this file?`,ae.value=!0,H.value=t==="edit",H.value&&O.value&&(O.value.value="")},we=()=>{ae.value=!1,y.value="",se.value="",S.value=null,H.value=!1,T.value=null,O.value&&(O.value.value="")},Xe=async()=>{if(S.value){if(y.value==="delete")await Ge(),p.value=!0;else if(y.value==="edit"&&T.value)await We(),p.value=!0;else if(y.value==="edit"&&!T.value){alert("Please select a file to replace the current one.");return}we()}},Ge=async()=>{try{const t=JSON.parse(localStorage.getItem("tasks")||"[]"),a=t.findIndex(d=>d.id===s.id);a!==-1&&(t[a].attachments=t[a].attachments.filter(d=>d.id!==S.value.id),localStorage.setItem("tasks",JSON.stringify(t)),s.attachments=[...t[a].attachments],console.log(`Attachment deleted: ${S.value.name}`))}catch(t){console.error("Failed to delete attachment:",t),alert("Failed to delete attachment. Please try again.")}},Ke=t=>{t.id?_.push({path:`/view-attachment/${t.id}`,query:{taskId:s.id}}):alert("Attachment ID is missing. Unable to view the file.")},oe=(t,a)=>{F.value=t,$.value=a,P.value=!0},de=()=>{P.value=!1,F.value="",$.value=""},Qe=t=>{T.value=t.target.files[0]},We=async()=>{if(!(!T.value||!S.value))try{const t=URL.createObjectURL(T.value),a=JSON.parse(localStorage.getItem("tasks")||"[]"),d=a.findIndex(i=>i.id===s.id);if(d!==-1){const i=a[d].attachments.findIndex(r=>r.id===S.value.id);i!==-1&&(a[d].attachments[i]={...a[d].attachments[i],name:T.value.name,url:t},localStorage.setItem("tasks",JSON.stringify(a)),s.attachments=[...a[d].attachments],console.log(`Attachment replaced: ${S.value.name} with ${T.value.name}`))}}catch(t){console.error("Failed to replace attachment:",t),alert("Failed to replace attachment. Please try again.")}},Ze=t=>{L.value.add(`agent-${t}`)},et=t=>{L.value.delete(`agent-${t}`)},tt=t=>{L.value.add(`client-${t}`)},at=t=>{L.value.delete(`client-${t}`)},st=t=>{x.value=t,N.value=!0},it=t=>{x.value=t,U.value=!0},De=()=>{N.value=!1,U.value=!1,x.value=null},lt=async()=>{if(x.value){try{const t=JSON.parse(localStorage.getItem("tasks")||"[]"),a=t.findIndex(d=>d.id===s.id);a!==-1&&(N.value?(t[a].agentDetails=t[a].agentDetails.filter(d=>d.id!==x.value.id),s.agentDetails=[...t[a].agentDetails]):U.value&&(t[a].clientDetails=t[a].clientDetails.filter(d=>d.id!==x.value.id),s.clientDetails=[...t[a].clientDetails]),localStorage.setItem("tasks",JSON.stringify(t)),console.log(`Deleted ${x.value.name} from ${N.value?"agents":"clients"}`),p.value=!0)}catch(t){console.error("Failed to delete person:",t),alert("Failed to delete person. Please try again.")}De()}},g=async t=>{try{const a=JSON.parse(localStorage.getItem("tasks")||"[]"),d=a.findIndex(i=>i.id===s.id);d!==-1&&(a[d]={...a[d],...t,updatedAt:new Date().toISOString()},localStorage.setItem("tasks",JSON.stringify(a)),Object.assign(s,t))}catch(a){throw console.error("Failed to persist task data:",a),a}},nt=()=>{const t=JSON.parse(localStorage.getItem("tasks")||"[]"),a=t.findIndex(d=>d.id===s.id);a!==-1&&(t[a].elapsedTime=w.value,localStorage.setItem("tasks",JSON.stringify(t)))};ve([()=>s.agentDetails,()=>s.clientDetails,()=>s.attachments],()=>{const t=JSON.stringify(s.agentDetails),a=JSON.stringify(s.clientDetails),d=JSON.stringify(s.attachments),i=JSON.parse(localStorage.getItem("tasks")||"[]").find(rt=>rt.id===s.id),r=JSON.stringify((i==null?void 0:i.agentDetails)||[]),X=JSON.stringify((i==null?void 0:i.clientDetails)||[]),v=JSON.stringify((i==null?void 0:i.attachments)||[]);p.value=t!==r||a!==X||d!==v},{deep:!0});const ot=()=>{s.status==="in_progress"&&le()&&!s.timerStopped&&(ie(),s.timerStopped=!0,g({status:s.status,timerStopped:!0,totalTime:s.totalTime}))};ut(async()=>{try{if(D.value=!0,setTimeout(()=>{M.setLayout({hideSidebar:!0,hideHeader:!0,background:"#f9fafb"})},50),!await m(["agent","admin"])){_.push("/unauthorized");return}await Se(),setTimeout(()=>{D.value=!1},800),setInterval(ot,6e4)}catch(t){console.error("Failed to initialize task:",t),alert("Failed to initialize task. Please try again."),D.value=!1}}),ve(()=>R.params.id,()=>{Se()});const Se=async()=>{try{const t=parseInt(R.params.id,10),a=localStorage.getItem("currentTaskDetail");if(a){const v=JSON.parse(a);if(v.id===t){Object.assign(s,{...v,description:v.description||[],agentDetails:v.agentDetails||[],clientDetails:v.clientDetails||[],attachments:v.attachments||[],isPaused:v.isPaused||!1,priority:v.priority||"Medium"}),v.status==="in_progress"&&v.startedAt&&(A.value=new Date(v.startedAt).getTime(),s.isPaused||q());return}}const d=JSON.parse(localStorage.getItem("tasks")||"[]"),i=d.find(v=>Number(v.id)===t);if(!i){console.error("Task not found with ID:",t),console.log("Available tasks:",d.map(v=>({id:v.id,title:v.title}))),alert("Task not found"),_.push("/tasks");return}Object.assign(s,{...i,description:i.description||[],agentDetails:i.agentDetails||[],clientDetails:i.clientDetails||[],attachments:i.attachments||[],isPaused:i.isPaused||!1,priority:i.priority||"Medium"});const r=localStorage.getItem(`task_${t}_elapsedTime`),X=localStorage.getItem(`task_${t}_totalPausedTime`);r&&X?(w.value=parseInt(r,10),V.value=parseInt(X,10)):i.elapsedTime&&(w.value=i.elapsedTime),i.status==="in_progress"&&i.startedAt&&(A.value=new Date(i.startedAt).getTime(),s.isPaused||q())}catch(t){console.error("Failed to load task data:",t),alert("Failed to load task. Please try again.")}};_t(()=>{h.value&&clearInterval(h.value),M.setLayout({hideSidebar:!1,hideHeader:!1,background:"#F9FAFB"})});const dt=()=>{s.status==="completed"?_.push("/tasks/completed"):s.status==="draft"?_.push("/tasks/drafts"):s.status==="scheduled"?_.push("/tasks/scheduled"):_.push("/tasks/in-progress")};return(t,a)=>{var d;return o(),n(C,null,[e("header",St,[e("div",Tt,[e("div",xt,[e("div",At,[e("div",{class:"task-detail__back-button-container"},[e("button",{class:"task-detail__back-button",onClick:dt},a[5]||(a[5]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M19 12H5M5 12L12 19M5 12L12 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Back ")]))]),e("h1",{class:"task-detail__title",onMouseover:qe,onMouseleave:Ye,onMousemove:a[0]||(a[0]=i=>ze(i))},u(s.name),33),Z.value?(o(),n("div",{key:0,class:"task-detail__title-tooltip",style:G({left:me.value+"px",top:_e.value+"px"})},u(s.name),5)):k("",!0),e("div",Ct,[e("div",Mt,[a[6]||(a[6]=xe("Scheduled: ")),e("span",It,u(s.startDate),1)])])]),e("div",Pt,[e("span",{class:K(["task-detail__status","task-detail__status--"+s.status.toLowerCase()])},u(s.status),3)])]),s.status==="in_progress"?(o(),n("div",{key:0,class:K(["task-detail__timer",{"task-detail__timer--paused":s.isPaused}])},[e("div",Ft,u(s.isPaused?"Timer paused at:":"Time elapsed:"),1),e("div",$t,u(ke.value),1)],2)):k("",!0),e("div",Ot,[s.status==="in_progress"?(o(),n(C,{key:0},[s.isPaused?(o(),n("button",{key:1,class:"task-detail__action-btn task-detail__action-btn--resume",onClick:a[2]||(a[2]=i=>Y("resume")),"aria-label":"Resume task"}," Resume task ")):(o(),n("button",{key:0,class:"task-detail__action-btn task-detail__action-btn--pause",onClick:a[1]||(a[1]=i=>Y("pause")),"aria-label":"Pause task"}," Pause task ")),e("button",{class:"task-detail__action-btn task-detail__action-btn--end",onClick:a[3]||(a[3]=i=>Y("end")),"aria-label":"End task"}," End task "),e("button",{class:K(["task-detail__action-btn","task-detail__action-btn--save",{"task-detail__action-btn--active":p.value}]),onClick:a[4]||(a[4]=i=>Y("save")),"aria-label":p.value?"Save changes":"No changes to save",disabled:!p.value}," Save ",10,Nt)],64)):s.status==="draft"?(o(),n("button",{key:1,class:"task-detail__action-btn task-detail__action-btn--start",onClick:he,"aria-label":"Start task"}," Start task ")):s.status==="scheduled"?(o(),n("button",{key:2,class:"task-detail__action-btn task-detail__action-btn--start",onClick:he,"aria-label":"Start task"}," Start task ")):k("",!0)])])]),e("main",Vt,[D.value?(o(),n("div",jt,a[7]||(a[7]=[j('<div class="task-detail__skeleton-grid" data-v-8dfe6b2f><div class="task-detail__skeleton-left" data-v-8dfe6b2f><div class="task-detail__skeleton-section" data-v-8dfe6b2f><div class="task-detail__skeleton-header" data-v-8dfe6b2f></div><div class="task-detail__skeleton-card" data-v-8dfe6b2f></div><div class="task-detail__skeleton-card" data-v-8dfe6b2f></div></div><div class="task-detail__skeleton-section" data-v-8dfe6b2f><div class="task-detail__skeleton-header" data-v-8dfe6b2f></div><div class="task-detail__skeleton-card" data-v-8dfe6b2f></div><div class="task-detail__skeleton-card" data-v-8dfe6b2f></div></div></div><div class="task-detail__skeleton-right" data-v-8dfe6b2f><div class="task-detail__skeleton-section" data-v-8dfe6b2f><div class="task-detail__skeleton-header" data-v-8dfe6b2f></div><div class="task-detail__skeleton-content" data-v-8dfe6b2f></div></div><div class="task-detail__skeleton-section" data-v-8dfe6b2f><div class="task-detail__skeleton-header" data-v-8dfe6b2f></div><div class="task-detail__skeleton-timeline" data-v-8dfe6b2f></div></div><div class="task-detail__skeleton-section" data-v-8dfe6b2f><div class="task-detail__skeleton-header" data-v-8dfe6b2f></div><div class="task-detail__skeleton-attachment" data-v-8dfe6b2f></div></div></div></div>',1)]))):(o(),n("div",Rt,[e("div",Jt,[e("section",Bt,[e("div",{class:"task-detail__add-flex"},[a[8]||(a[8]=e("div",{class:"task-detail__agent-info-header"},[e("h2",{class:"task-detail__section-title"},"Agents involved in this task"),e("p",{class:"task-detail__section-subtitle"},"Add agents from your contacts")],-1)),e("div",{class:"task-detail__add-button-container"},[e("button",{class:"task-detail__add-btn",onClick:Me,"aria-label":"Add agent"},"+ Add agent")])]),e("div",Lt,[(o(!0),n(C,null,Q(s.agentDetails,i=>(o(),n("div",{key:i.id,class:"task-detail__agent-card",role:"listitem",onMouseover:r=>Ze(i.id),onMouseleave:r=>et(i.id)},[e("img",{src:i.avatar,alt:i.name,class:"task-detail__agent-avatar",onError:fe},null,40,Ht),e("div",Ut,[e("span",zt,u(i.name),1),e("span",qt,u(i.email),1)]),e("button",{class:"task-detail__reminder-btn",onClick:r=>pe(i),"aria-label":"Send reminder to "+i.name}," Send reminder ",8,Yt),e("button",{class:"task-detail__delete-btn",onClick:r=>st(i),"aria-label":"Delete "+i.name},a[9]||(a[9]=[j('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F87171" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-8dfe6b2f><polyline points="3 6 5 6 21 6" data-v-8dfe6b2f></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-8dfe6b2f></path><line x1="10" y1="11" x2="10" y2="17" data-v-8dfe6b2f></line><line x1="14" y1="11" x2="14" y2="17" data-v-8dfe6b2f></line></svg>',1)]),8,Xt)],40,Et))),128))])]),e("section",Gt,[e("div",{class:"task-detail__add-flex"},[a[10]||(a[10]=e("div",{class:"task-detail__agent-info-header"},[e("h2",{class:"task-detail__section-title"},"Clients involved in this task"),e("p",{class:"task-detail__section-subtitle"},"Add clients from your contacts")],-1)),e("div",{class:"task-detail__add-button-container"},[e("button",{class:"task-detail__add-btn",onClick:Fe,"aria-label":"Add client"},"+ Add client")])]),e("div",Kt,[(o(!0),n(C,null,Q(s.clientDetails,i=>(o(),n("div",{key:i.id,class:"task-detail__agent-card",role:"listitem",onMouseover:r=>tt(i.id),onMouseleave:r=>at(i.id)},[e("img",{src:i.avatar,alt:i.name,class:"task-detail__agent-avatar",onError:fe},null,40,Wt),e("div",Zt,[e("span",ea,u(i.name),1),e("span",ta,u(i.email),1)]),e("button",{class:"task-detail__reminder-btn",onClick:r=>pe(i),"aria-label":"Send reminder to "+i.name}," Send reminder ",8,aa),e("button",{class:"task-detail__delete-btn",onClick:r=>it(i),"aria-label":"Delete "+i.name},a[11]||(a[11]=[j('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#F87171" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-8dfe6b2f><polyline points="3 6 5 6 21 6" data-v-8dfe6b2f></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-8dfe6b2f></path><line x1="10" y1="11" x2="10" y2="17" data-v-8dfe6b2f></line><line x1="14" y1="11" x2="14" y2="17" data-v-8dfe6b2f></line></svg>',1)]),8,sa)],40,Qt))),128))])])]),e("div",ia,[e("div",la,[e("section",na,[e("div",oa,[a[12]||(a[12]=e("h2",{class:"task-detail__section-title"},"Task description",-1)),e("span",{class:K(["task-detail__priority",`task-detail__priority--${s.priority.toLowerCase()}`])},u(s.priority),3)]),e("ul",da,[(o(!0),n(C,null,Q(s.description,(i,r)=>(o(),n("li",{key:r,class:"task-detail__description-item"},u(i),1))),128))])]),e("section",ra,[e("div",ca,[e("div",ua,[a[14]||(a[14]=e("span",{class:"task-detail__timeline-label"},"Started",-1)),e("div",va,[a[13]||(a[13]=e("svg",{class:"task-detail__checkbox-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"#999999","stroke-width":"1.5"},[e("rect",{x:"2",y:"2",width:"20",height:"20",rx:"4","stroke-dasharray":"2 2"})],-1)),e("span",ma,u(ge(s.startedAt)),1)])]),e("div",_a,[a[16]||(a[16]=e("span",{class:"task-detail__timeline-label"},"Due date",-1)),e("div",ka,[a[15]||(a[15]=e("svg",{class:"task-detail__checkbox-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"#999999","stroke-width":"1.5"},[e("rect",{x:"2",y:"2",width:"20",height:"20",rx:"4","stroke-dasharray":"2 2"})],-1)),e("span",fa,u(ge(s.endDate)),1)])])])]),e("section",pa,[a[21]||(a[21]=e("h2",{class:"task-detail__section-title"},"Attachments",-1)),s.attachments&&s.attachments.length>0?(o(),n("div",ha,[(o(!0),n(C,null,Q(s.attachments,i=>(o(),n("div",{key:i.id,class:"task-detail__attachment",role:"listitem"},[a[20]||(a[20]=j('<svg class="task-detail__attachment-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#A1A1A1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-8dfe6b2f><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" data-v-8dfe6b2f></path><polyline points="14 2 14 8 20 8" data-v-8dfe6b2f></polyline><line x1="16" y1="13" x2="8" y2="13" data-v-8dfe6b2f></line><line x1="16" y1="17" x2="8" y2="17" data-v-8dfe6b2f></line><polyline points="10 9 9 9 8 9" data-v-8dfe6b2f></polyline></svg>',1)),e("span",ga,u(i.name),1),e("div",ba,[(o(),n("svg",{onClick:r=>ye("edit",i),class:"task-detail__action-icon task-detail__action-icon--edit",onMouseover:r=>{ne(r),oe("edit",i.name)},onMouseleave:de,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#A78BFA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},a[17]||(a[17]=[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},null,-1),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},null,-1)]),40,ya)),P.value&&F.value==="edit"?(o(),n("div",{key:0,class:"task-detail__attachment-tooltip",style:G({left:J.value+"px",top:B.value+"px"})}," Edit "+u($.value),5)):k("",!0),(o(),n("svg",{onClick:r=>ye("delete",i),class:"task-detail__action-icon task-detail__action-icon--delete",onMouseover:r=>{ne(r),oe("delete",i.name)},onMouseleave:de,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#F87171","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},a[18]||(a[18]=[e("polyline",{points:"3 6 5 6 21 6"},null,-1),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},null,-1),e("line",{x1:"10",y1:"11",x2:"10",y2:"17"},null,-1),e("line",{x1:"14",y1:"11",x2:"14",y2:"17"},null,-1)]),40,wa)),P.value&&F.value==="delete"?(o(),n("div",{key:1,class:"task-detail__attachment-tooltip",style:G({left:J.value+"px",top:B.value+"px"})}," Delete "+u($.value),5)):k("",!0),(o(),n("svg",{onClick:r=>Ke(i),class:"task-detail__action-icon task-detail__action-icon--view",onMouseover:r=>{ne(r),oe("view",i.name)},onMouseleave:de,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#60A5FA","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},a[19]||(a[19]=[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),e("circle",{cx:"12",cy:"12",r:"3"},null,-1)]),40,Da)),P.value&&F.value==="view"?(o(),n("div",{key:2,class:"task-detail__attachment-tooltip",style:G({left:J.value+"px",top:B.value+"px"})}," View "+u($.value),5)):k("",!0)])]))),128))])):(o(),n("div",Sa," No attachments have been uploaded for this task yet. "))])])])])),ue(ft,{"is-open":I.value,"initial-selected-agents":s.agentDetails,onClose:Ie,onSelect:Pe},null,8,["is-open","initial-selected-agents"]),ue(pt,{"is-open":f.value,"initial-selected-clients":s.clientDetails,onClose:$e,onSelect:Oe},null,8,["is-open","initial-selected-clients"]),ue(Dt,{"is-open":c.value,recipient:b.value,"task-data":s,onClose:Ne,onSelect:Ve},null,8,["is-open","recipient","task-data"]),ee.value?(o(),n("div",Ta,[e("div",xa,[e("h2",Aa,u(te.value),1),e("p",Ca,"Do you wish to "+u(E.value)+" this task?",1),e("div",{class:"confirmation-actions"},[e("button",{class:"confirmation-btn confirmation-btn--no",onClick:be},"No"),e("button",{class:"confirmation-btn confirmation-btn--yes",onClick:Ue},"Yes")])])])):k("",!0),ae.value?(o(),n("div",Ma,[e("div",Ia,[e("h2",Pa,u(se.value),1),y.value==="delete"?(o(),n("p",Fa," Do you wish to "+u(y.value)+" this file? This action is permanent and cannot be reversed by Real City. However, you can re-add it if you have it locally. ",1)):(o(),n("p",$a,"Do you wish to "+u(y.value)+" this file?",1)),y.value==="edit"&&H.value?(o(),n("div",Oa,[e("input",{type:"file",ref_key:"fileInputRef",ref:O,onChange:Qe,class:"task-detail__file-input",accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png"},null,544)])):k("",!0),e("div",{class:"confirmation-actions"},[e("button",{class:"confirmation-btn confirmation-btn--no",onClick:we},"No"),e("button",{class:"confirmation-btn confirmation-btn--yes",onClick:Xe},"Yes")])])])):k("",!0),N.value||U.value?(o(),n("div",Na,[e("div",Va,[a[22]||(a[22]=e("h2",{class:"confirmation-title"},"Confirm Deletion",-1)),e("p",ja,"Do you wish to delete "+u((d=x.value)==null?void 0:d.name)+" from docs?",1),e("div",{class:"confirmation-actions"},[e("button",{class:"confirmation-btn confirmation-btn--no",onClick:De},"No"),e("button",{class:"confirmation-btn confirmation-btn--yes",onClick:lt},"Yes")])])])):k("",!0)])],64)}}},Ea=Ce(Ra,[["__scopeId","data-v-8dfe6b2f"]]);export{Ea as default};
