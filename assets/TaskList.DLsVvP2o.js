import{m as V,g as I,r as f,o as z,w as E,c as j,b as o,i as n,v as d,u as C,e as s,F as b,f as x,t as m,n as F,l as y,s as h}from"./vendor.Bh3_gxHF.js";import{_ as P,g as J}from"./index.Cv61STol.js";const O={class:"task-list"},R={key:0,class:"clear-all-container"},Y={key:1,class:"task-list"},U={key:2,class:"empty-state"},q={class:"empty-state-title"},G={class:"empty-state-text"},K={key:3},Q=["onClick"],W={class:"task-content"},X={class:"task-title"},Z={key:0,class:"status-text"},tt={key:1,class:"button-container"},et=["onClick"],st=["onClick"],at={key:2,class:"status-text completed"},lt={class:"dialog-actions"},ot={class:"dialog-actions"},nt={__name:"TaskList",setup(rt){const g=V(),r=I(),i=J(),w=f(!0),u=f(!1),c=f(!1),v=f(null);z(()=>{A()});const A=()=>{w.value=!0,setTimeout(()=>{i.initTasks(),w.value=!1},1e3)};E(()=>r.path,()=>{A()});const S=a=>{v.value=a,u.value=!0},N=()=>{v.value&&(i.deleteTask(v.value.id),u.value=!1,v.value=null)},$=()=>{i.clearAllDrafts(),c.value=!1},T=j(()=>{const a=r.path.split("/").pop();let t=[];switch(a){case"in-progress":t=i.getInProgressTasks();break;case"drafts":t=i.getDraftTasks();break;case"completed":t=i.getCompletedTasks();break;case"scheduled":t=i.getScheduledTasks();break;default:t=i.tasks}return[...t].sort((e,l)=>{let p,k;return e.status==="scheduled"?p=new Date(`${e.startDate||e.formattedStartTime||e.createdAt}`.replace(" ","T")).getTime():e.status==="completed"?p=new Date(e.completedAt||e.updatedAt||e.createdAt).getTime():e.status==="in_progress"?p=new Date(e.startedAt||e.updatedAt||e.createdAt).getTime():p=new Date(e.updatedAt||e.createdAt||e.id).getTime(),l.status==="scheduled"?k=new Date(`${l.startDate||l.formattedStartTime||l.createdAt}`.replace(" ","T")).getTime():l.status==="completed"?k=new Date(l.completedAt||l.updatedAt||l.createdAt).getTime():l.status==="in_progress"?k=new Date(l.startedAt||l.updatedAt||l.createdAt).getTime():k=new Date(l.updatedAt||l.createdAt||l.id).getTime(),k-p})}),_=a=>{a.status==="completed"?(localStorage.setItem("completedTasks",JSON.stringify(a)),g.push({name:"CompletedTaskDetail",params:{id:a.id}})):(localStorage.setItem("currentTaskDetail",JSON.stringify(a)),g.push({name:"TaskDetail",params:{id:a.id}}))},L=a=>{event.stopPropagation();const t=r.path.split("/").pop();g.push(`/tasks/create?draftId=${a.id}&mode=edit&from=${t}`)},D=a=>a?new Date(a).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"",M=a=>a?a.length>25?a.substring(0,25)+"...":a:"",B=()=>{const a=r.path;return a.includes("/drafts")?"No draft tasks":a.includes("/in-progress")?"No tasks in progress":a.includes("/completed")?"No completed tasks":a.includes("/scheduled")?"No scheduled tasks":"No tasks found"},H=()=>{const a=r.path;return a.includes("/drafts")?"Create a new task to get started":a.includes("/in-progress")?"Start working on a task to see it here":a.includes("/completed")?"Complete tasks will appear here":a.includes("/scheduled")?"Schedule a task to see it here":"Create a task to get started"};return(a,t)=>(n(),o("div",O,[C(r).path.includes("/drafts")&&T.value.length>0?(n(),o("div",R,[s("button",{class:"clear-all-button",onClick:t[0]||(t[0]=e=>c.value=!0)}," Clear All Drafts ")])):d("",!0),w.value?(n(),o("div",Y,[(n(),o(b,null,x(4,e=>s("div",{key:e,class:"task-card skeleton"},t[8]||(t[8]=[s("div",{class:"task-content"},[s("div",{class:"skeleton-title"}),s("div",{class:"skeleton-status"})],-1)]))),64))])):T.value.length===0?(n(),o("div",U,[t[9]||(t[9]=s("div",{class:"empty-state-icon"},[s("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5",stroke:"#9CA3AF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),s("h3",q,m(B()),1),s("p",G,m(H()),1),C(r).path.includes("/drafts")||C(r).path.includes("/in-progress")?(n(),o("button",{key:0,class:"create-task-btn",onClick:t[1]||(t[1]=e=>C(g).push("/tasks/create"))}," Create New Task ")):d("",!0)])):(n(),o("div",K,[(n(!0),o(b,null,x(T.value,e=>(n(),o("div",{key:e.id,class:F(["task-card",{"no-click":e.status==="draft"}]),onClick:l=>e.status!=="draft"&&_(e)},[s("div",W,[s("div",X,m(M(e.title)),1),e.status==="in_progress"?(n(),o("div",Z,[t[10]||(t[10]=s("span",{class:"status-label"},"Started:",-1)),y(" "+m(D(e.startedAt)),1)])):d("",!0),e.status==="draft"?(n(),o("div",tt,[s("button",{class:"delete-button",onClick:h(l=>S(e),["stop"]),"aria-label":"Delete draft"},t[11]||(t[11]=[s("svg",{class:"delete-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,et),s("button",{class:"edit-button",onClick:h(l=>L(e),["stop"])},t[12]||(t[12]=[s("svg",{class:"edit-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),y(" Continue editing ")]),8,st)])):d("",!0),e.status==="completed"?(n(),o("div",at,[t[13]||(t[13]=s("svg",{class:"check-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)),t[14]||(t[14]=s("span",{class:"status-label"},"Completed:",-1)),y(" "+m(D(e.completedAt)),1)])):d("",!0)])],10,Q))),128))])),u.value?(n(),o("div",{key:4,class:"dialog-overlay",onClick:t[4]||(t[4]=e=>u.value=!1)},[s("div",{class:"dialog",onClick:t[3]||(t[3]=h(()=>{},["stop"]))},[t[15]||(t[15]=s("h3",{class:"dialog-title"},"Delete Draft?",-1)),t[16]||(t[16]=s("p",{class:"dialog-text"},"Do you wish to delete this draft?",-1)),s("div",lt,[s("button",{class:"dialog-btn dialog-btn--secondary",onClick:t[2]||(t[2]=e=>u.value=!1)}," No "),s("button",{class:"dialog-btn dialog-btn--primary",onClick:N}," Yes ")])])])):d("",!0),c.value?(n(),o("div",{key:5,class:"dialog-overlay",onClick:t[7]||(t[7]=e=>c.value=!1)},[s("div",{class:"dialog",onClick:t[6]||(t[6]=h(()=>{},["stop"]))},[t[17]||(t[17]=s("h3",{class:"dialog-title"},"Clear All Drafts?",-1)),t[18]||(t[18]=s("p",{class:"dialog-text"},"Do you wish to delete all drafts? This action cannot be undone.",-1)),s("div",ot,[s("button",{class:"dialog-btn dialog-btn--secondary",onClick:t[5]||(t[5]=e=>c.value=!1)}," No "),s("button",{class:"dialog-btn dialog-btn--primary",onClick:$}," Yes ")])])])):d("",!0)]))}},ut=P(nt,[["__scopeId","data-v-369b788c"]]);export{ut as T};
