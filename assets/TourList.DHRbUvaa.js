import{r as g,c as V,g as z,o as E,b as l,e as t,v as r,u,m as I,l as k,F as C,f as y,t as d,s as f,h as Y,i as n,j as F,k as R,n as A}from"./vendor.Bh3_gxHF.js";import{u as P}from"./tourStore.yq7Hhqko.js";import{_ as U}from"./index.Cv61STol.js";const Z={class:"tour-list"},q={class:"create-tour-card"},G={class:"tour-tabs"},J={key:0,class:"tab-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K={key:1,class:"tab-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},O={key:2,class:"tab-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Q={key:3,class:"tab-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},W={key:0,class:"clear-all-container"},X={key:1,class:"tour-list"},tt={key:2,class:"empty-state"},et={class:"empty-state-title"},st={class:"empty-state-text"},ot={key:3,class:"tour-cards"},lt=["onClick"],nt={class:"tour-content"},rt={class:"tour-image"},at=["src","alt"],it={class:"tour-info"},ut={class:"tour-title"},dt={class:"tour-date"},ct={key:0,class:"button-container"},pt=["onClick"],vt=["onClick"],mt={key:1,class:"status-text completed"},gt={class:"dialog-actions"},kt={class:"dialog-actions"},ft={__name:"TourList",setup(ht){const v=I(),a=z(),i=P(),h=g(!0),c=g(!1),p=g(!1),m=g(null),T=[{name:"In progress",path:"/tours/in-progress"},{name:"Scheduled",path:"/tours/scheduled"},{name:"Drafts",path:"/tours/drafts"},{name:"Completed",path:"/tours/completed"}],w=V(()=>{const o=a.path;return o.includes("/drafts")?i.getDraftTours():o.includes("/completed")?i.getCompletedTours():o.includes("/in-progress")?i.getInProgressTours():i.getScheduledTours()}),b=o=>o?new Date(o).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"N/A",M=o=>(o==null?void 0:o.length)>50?o.substring(0,47)+"...":o,D=o=>{v.push(`/tours/${o.id}`)},_=o=>{v.push(`/tours/${o.id}/edit`)},L=o=>{m.value=o,c.value=!0},B=async()=>{m.value&&(await i.deleteTour(m.value.id),c.value=!1,m.value=null)},S=async()=>{await i.clearAllDrafts(),p.value=!1},$=o=>{o.target.src="/default-property-image.jpg"},j=()=>{const o=a.path;return o.includes("/drafts")?"No draft tours":o.includes("/completed")?"No completed tours":"No scheduled tours"},N=()=>{const o=a.path;return o.includes("/drafts")?"You have no draft tours. Create a new tour to get started.":o.includes("/completed")?"You have no completed tours yet.":"You have no scheduled tours. Create a new tour to get started."};return E(async()=>{h.value=!0,await i.initTours(),setTimeout(()=>{h.value=!1},800)}),(o,e)=>{const H=Y("router-link");return n(),l("div",Z,[e[25]||(e[25]=t("div",{class:"page-header"},[t("div",null,[t("h1",null,"Tours"),t("p",{class:"subtitle"},"Manage and track your property tours and schedules")])],-1)),t("div",q,[e[10]||(e[10]=t("div",{class:"create-tour-content"},[t("h2",null,"Create a tour"),t("p",null,"Schedule an apartment tour with your client")],-1)),t("button",{class:"create-tour-btn",onClick:e[0]||(e[0]=s=>u(v).push("/tours/create"))},e[9]||(e[9]=[t("svg",{class:"plus-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),k(" Create tour ")]))]),t("div",G,[(n(),l(C,null,y(T,s=>F(H,{key:s.path,to:s.path,class:A(["tab",{active:u(a).path===s.path}])},{default:R(()=>[s.name==="In progress"?(n(),l("svg",J,e[11]||(e[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1)]))):r("",!0),s.name==="Scheduled"?(n(),l("svg",K,e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"},null,-1)]))):r("",!0),s.name==="Drafts"?(n(),l("svg",O,e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1)]))):r("",!0),s.name==="Completed"?(n(),l("svg",Q,e[14]||(e[14]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):r("",!0),k(" "+d(s.name),1)]),_:2},1032,["to","class"])),64))]),u(a).path.includes("/drafts")&&w.value.length>0?(n(),l("div",W,[t("button",{class:"clear-all-button",onClick:e[1]||(e[1]=s=>p.value=!0)}," Clear All Drafts ")])):r("",!0),h.value?(n(),l("div",X,[(n(),l(C,null,y(4,s=>t("div",{key:s,class:"tour-card skeleton"},e[15]||(e[15]=[t("div",{class:"tour-content"},[t("div",{class:"skeleton-title"}),t("div",{class:"skeleton-status"})],-1)]))),64))])):w.value.length===0?(n(),l("div",tt,[e[16]||(e[16]=t("div",{class:"empty-state-icon"},[t("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 5H7C5.89543 5 5 5.89543 5 7V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V7C19 5.89543 18.1046 5 17 5H15M9 5C9 6.10457 9.89543 7 11 7H13C14.1046 7 15 6.10457 15 5M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5",stroke:"#9CA3AF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),t("h3",et,d(j()),1),t("p",st,d(N()),1),u(a).path.includes("/drafts")||u(a).path.includes("/scheduled")?(n(),l("button",{key:0,class:"create-tour-btn",onClick:e[2]||(e[2]=s=>u(v).push("/tours/create"))}," Create New Tour ")):r("",!0)])):(n(),l("div",ot,[(n(!0),l(C,null,y(w.value,s=>(n(),l("div",{key:s.id,class:A(["tour-card",{"no-click":s.status==="draft"}]),onClick:x=>s.status!=="draft"&&D(s)},[t("div",nt,[t("div",rt,[t("img",{src:s.image||"/default-property-image.jpg",alt:s.title,onError:$},null,40,at)]),t("div",it,[t("div",ut,d(M(s.title)),1),t("div",dt,"Started: "+d(b(s.startedAt||s.createdAt)),1),s.status==="draft"?(n(),l("div",ct,[t("button",{class:"delete-button",onClick:f(x=>L(s),["stop"]),"aria-label":"Delete draft"},e[17]||(e[17]=[t("svg",{class:"delete-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,pt),t("button",{class:"edit-button",onClick:f(x=>_(s),["stop"])},e[18]||(e[18]=[t("svg",{class:"edit-icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),k(" Continue editing ")]),8,vt)])):r("",!0),s.status==="completed"?(n(),l("div",mt,[e[19]||(e[19]=t("svg",{class:"check-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})],-1)),e[20]||(e[20]=t("span",{class:"status-label"},"Completed:",-1)),k(" "+d(b(s.completedAt)),1)])):r("",!0)])])],10,lt))),128))])),c.value?(n(),l("div",{key:4,class:"dialog-overlay",onClick:e[5]||(e[5]=s=>c.value=!1)},[t("div",{class:"dialog",onClick:e[4]||(e[4]=f(()=>{},["stop"]))},[e[21]||(e[21]=t("h3",{class:"dialog-title"},"Delete Draft?",-1)),e[22]||(e[22]=t("p",{class:"dialog-text"},"Do you wish to delete this draft?",-1)),t("div",gt,[t("button",{class:"dialog-btn dialog-btn--secondary",onClick:e[3]||(e[3]=s=>c.value=!1)}," No "),t("button",{class:"dialog-btn dialog-btn--primary",onClick:B}," Yes ")])])])):r("",!0),p.value?(n(),l("div",{key:5,class:"dialog-overlay",onClick:e[8]||(e[8]=s=>p.value=!1)},[t("div",{class:"dialog",onClick:e[7]||(e[7]=f(()=>{},["stop"]))},[e[23]||(e[23]=t("h3",{class:"dialog-title"},"Clear All Drafts?",-1)),e[24]||(e[24]=t("p",{class:"dialog-text"},"Do you wish to delete all drafts? This action cannot be undone.",-1)),t("div",kt,[t("button",{class:"dialog-btn dialog-btn--secondary",onClick:e[6]||(e[6]=s=>p.value=!1)}," No "),t("button",{class:"dialog-btn dialog-btn--primary",onClick:S}," Yes ")])])])):r("",!0)])}}},bt=U(ft,[["__scopeId","data-v-07f6c709"]]);export{bt as default};
